{"version":3,"file":"js/app.ae7f425e.js","mappings":"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","sources":["webpack://idphotomaker/./src/App.vue?52e1","webpack://idphotomaker/./src/views/header/HeaderView.vue?d839","webpack://idphotomaker/./src/components/header/SmartCrop.vue?16e1","webpack://idphotomaker/./src/components/ImgCutter/src/components/ImgCutter.vue?1196","webpack://idphotomaker/src/components/ImgCutter/src/components/ImgCutter.vue","webpack://idphotomaker/./src/components/ImgCutter/src/components/ImgCutter.vue?ddf4","webpack://idphotomaker/./src/components/ImgCutter/src/components/ImgCutter.vue","webpack://idphotomaker/./src/components/ImgCutter/src/index.js","webpack://idphotomaker/src/components/header/SmartCrop.vue","webpack://idphotomaker/./src/components/header/SmartCrop.vue?1cc1","webpack://idphotomaker/./src/components/header/SmartCrop.vue","webpack://idphotomaker/./src/components/header/BackgroundReplace.vue?239c","webpack://idphotomaker/./src/config/faceppapi.js","webpack://idphotomaker/src/components/header/BackgroundReplace.vue","webpack://idphotomaker/./src/components/header/BackgroundReplace.vue?41ac","webpack://idphotomaker/./src/components/header/BackgroundReplace.vue","webpack://idphotomaker/src/views/header/HeaderView.vue","webpack://idphotomaker/./src/views/header/HeaderView.vue?3333","webpack://idphotomaker/./src/views/header/HeaderView.vue","webpack://idphotomaker/./src/views/main/MainView.vue?fe26","webpack://idphotomaker/./src/components/main/SiderPreviewCard.vue?4993","webpack://idphotomaker/src/components/main/SiderPreviewCard.vue","webpack://idphotomaker/./src/components/main/SiderPreviewCard.vue?9ac3","webpack://idphotomaker/./src/components/main/SiderPreviewCard.vue","webpack://idphotomaker/./src/components/main/MainPreviewCard.vue?c7af","webpack://idphotomaker/src/components/main/MainPreviewCard.vue","webpack://idphotomaker/./src/components/main/MainPreviewCard.vue?de0a","webpack://idphotomaker/./src/components/main/MainPreviewCard.vue","webpack://idphotomaker/src/views/main/MainView.vue","webpack://idphotomaker/./src/views/main/MainView.vue?d595","webpack://idphotomaker/./src/views/main/MainView.vue","webpack://idphotomaker/src/App.vue","webpack://idphotomaker/./src/App.vue?fbbb","webpack://idphotomaker/./src/App.vue","webpack://idphotomaker/./src/store/index.js","webpack://idphotomaker/./src/main.js","webpack://idphotomaker/webpack/bootstrap","webpack://idphotomaker/webpack/runtime/chunk loaded","webpack://idphotomaker/webpack/runtime/compat get default export","webpack://idphotomaker/webpack/runtime/define property getters","webpack://idphotomaker/webpack/runtime/global","webpack://idphotomaker/webpack/runtime/hasOwnProperty shorthand","webpack://idphotomaker/webpack/runtime/make namespace object","webpack://idphotomaker/webpack/runtime/jsonp chunk loading","webpack://idphotomaker/webpack/startup"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"layout\"},[_c('Layout',[_c('HeaderView'),_c('MainView')],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header-view\"},[_c('Header',{staticClass:\"header\"},[_c('Menu',{staticClass:\"menu\",attrs:{\"mode\":\"horizontal\",\"theme\":\"light\"}},[_c('div',{staticClass:\"layout-nav\"},[_c('Dropdown',{staticClass:\"upload-img\"},[_c('Upload',{ref:\"upload\",attrs:{\"action\":\"#\",\"multiple\":false,\"show-upload-list\":false,\"before-upload\":_vm.loadImg,\"format\":['jpg', 'jpeg', 'png'],\"accept\":_vm.accept,\"on-format-error\":_vm.handleFormatError}},[_c('div',{staticClass:\"upload\"},[_c('Icon',{attrs:{\"type\":\"ios-add-circle-outline\"}}),_vm._v(\" 打开图片 \")],1)])],1),_c('Dropdown',{staticClass:\"reset-img\"},[_c('Button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.resetCurrentImg}},[_c('Icon',{attrs:{\"type\":\"ios-crop\"}}),_vm._v(\" 重置修改 \")],1)],1),_c('Dropdown',{staticClass:\"crop-img\"},[_c('Button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.smartCropModalVal = true}}},[_c('Icon',{attrs:{\"type\":\"ios-crop\"}}),_vm._v(\" 裁剪图片 \")],1)],1),_c('Dropdown',{staticClass:\"replace-bg\"},[_c('Button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.backgroundReplaceModalVal = true}}},[_c('Icon',{attrs:{\"type\":\"ios-aperture-outline\"}}),_vm._v(\" 背景替换 \")],1)],1),_c('Dropdown',{staticClass:\"replace-bg\"},[_c('Button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.exportImg}},[_c('Icon',{attrs:{\"type\":\"ios-cloud-download-outline\"}}),_vm._v(\" 导出下载 \")],1)],1)],1)])],1),_c('SmartCrop',{model:{value:(_vm.smartCropModalVal),callback:function ($$v) {_vm.smartCropModalVal=$$v},expression:\"smartCropModalVal\"}}),_c('BackgroundReplace',{model:{value:(_vm.backgroundReplaceModalVal),callback:function ($$v) {_vm.backgroundReplaceModalVal=$$v},expression:\"backgroundReplaceModalVal\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"draggable\":\"\",\"sticky\":\"\",\"reset-drag-position\":true,\"mask\":false,\"width\":800,\"title\":\"智能裁剪\",\"ok-text\":\"保存修改\",\"cancel-text\":\"取消修改\"},on:{\"on-visible-change\":_vm.handleVisibleChange,\"on-ok\":_vm.saveCropedImg,\"on-cancel\":_vm.closeModal},model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[_c('div',{staticClass:\"img-cutter\"},[_c('div',{staticClass:\"modal-left\"},[_c('ImgCutter',{ref:\"imgCutterModal\",attrs:{\"is-modal\":false,\"box-width\":570,\"box-height\":400,\"show-choose-btn\":false,\"preview-mode\":true,\"size-change\":true,\"cut-width\":200,\"cut-height\":280,\"rate\":\"10:14\",\"auto-rotate\":_vm.autoRotate},on:{\"cutDown\":_vm.cutDown,\"onPrintImg\":_vm.printImg,\"onClearAll\":_vm.clearImg,\"error\":_vm.error},scopedSlots:_vm._u([{key:\"cancel\",fn:function(){return [_c('Button',{ref:\"cancelButton\",attrs:{\"type\":\"text\",\"disabled\":\"\"}},[_vm._v(\" 取消 \")])]},proxy:true},{key:\"confirm\",fn:function(){return [_c('Button',{ref:\"cropButton\",attrs:{\"type\":\"primary\",\"disabled\":\"\"}},[_vm._v(\" 裁剪 \")])]},proxy:true}])})],1),_c('div',{staticClass:\"modal-right\"},[_c('div',{ref:\"previewimg\",staticClass:\"preview-img\"}),_c('div',{staticClass:\"right-button\"},[_c('Button',{ref:\"autoRotateButton\",staticClass:\"right-button\",attrs:{\"type\":\"primary\",\"disabled\":\"\",\"loading\":_vm.loading},on:{\"click\":_vm.smartRotate}},[(!_vm.loading)?_c('span',[_vm._v(\"自动矫正\")]):_c('span',[_vm._v(\"处理中...\")])])],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.showChooseBtn === true && _vm.isModal === true)?_c('div',{on:{\"click\":_vm.handleOpen}},[_vm._t(\"openImgCutter\"),_vm._t(\"open\")],2):_vm._e(),(!_vm.$slots.openImgCutter && !_vm.$slots.open && _vm.isModal === true)?_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.handleOpen}},[_vm._v(\" \"+_vm._s(_vm.label)+\" \")]):_vm._e(),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.visible)?_c('div',{ref:\"mask\",class:_vm.isModal === true ? 'mask vue-img-cutter' : ''},[(_vm.visible)?_c('div',{class:_vm.isModal === true ? 'dialogBoxModal' : 'dialogBox'},[_c('transition',{attrs:{\"name\":\"fade\",\"enter-class\":\"fade-in-enter\",\"enter-active-class\":\"fade-in-active\",\"leave-class\":\"fade-out-enter\",\"leave-active-class\":\"fade-out-active\"}},[_c('div',{ref:\"dialogMainModalRef\",class:_vm.isModal === true ? 'dialogMainModal' : 'dialogMain',style:('width:' + (_vm.isModal === true ? _vm.boxWidth + 32 : _vm.boxWidth) + 'px')},[_c('div',{staticClass:\"toolMain\"},[(_vm.isModal === true)?_c('div',{staticClass:\"tool-title\"},[_vm._v(\" 图片裁剪 \"),_c('span',{staticClass:\"closeIcon\",on:{\"click\":_vm.handleClose}},[_vm._v(\"×\")])]):_vm._e(),_c('div',{ref:\"toolBox\",staticClass:\"toolBox\",style:('height:' + _vm.boxHeight + 'px;width:' + _vm.boxWidth + 'px'),on:{\"mousemove\":_vm.controlBtnMouseMove,\"mouseup\":_vm.controlBtnMouseUp,\"mouseleave\":_vm.controlBtnMouseUp}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.drawImg.img && _vm.showChooseBtn === true),expression:\"!drawImg.img && showChooseBtn === true\"}],staticClass:\"tips\"},[_c('div',{staticClass:\"btn btn-warning btn-xs\",on:{\"click\":_vm.chooseImg}},[_vm._v(\" \"+_vm._s(_vm.label)+\" \")])]),(_vm.tool == true)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n                    _vm.drawImg.img &&\n                      _vm.dropImg.active !== true &&\n                      _vm.controlBox.disable == true &&\n                      _vm.toolBox.disable == true\n                  ),expression:\"\\n                    drawImg.img &&\\n                      dropImg.active !== true &&\\n                      controlBox.disable == true &&\\n                      toolBox.disable == true\\n                  \"}],staticClass:\"dockMain\",style:('background:' + _vm.toolBgc),on:{\"mouseenter\":_vm.dropImgOff}},[(_vm.rate)?_c('div',{staticClass:\"dockBtn\"},[_vm._t(\"ratio\",function(){return [_vm._v(\" Ratio: \")]}),_vm._v(\" \"+_vm._s(_vm.rate)+\" \")],2):_vm._e(),_c('div',{staticClass:\"dockBtn\",on:{\"click\":_vm.scaleReset}},[_vm._t(\"scaleReset\",function(){return [_vm._v(\" Scale: \")]}),_vm._v(\" \"+_vm._s(_vm.drawImg.swidth > 0 ? (_vm.drawImg.width / _vm.drawImg.swidth).toFixed(2) : '-')+\" \")],2),(_vm.originalGraph === false)?_c('div',{staticClass:\"dockBtn\",on:{\"click\":function($event){return _vm.turnImg(-90)}}},[_vm._t(\"turnLeft\",function(){return [_vm._v(\" ↳ \")]})],2):_vm._e(),(_vm.originalGraph === false)?_c('div',{staticClass:\"dockBtn\",on:{\"click\":function($event){return _vm.turnImg(90)}}},[_vm._t(\"turnRight\",function(){return [_vm._v(\" ↲ \")]})],2):_vm._e(),(_vm.originalGraph === false)?_c('div',{staticClass:\"dockBtn\",on:{\"click\":function($event){return _vm.turnReset()}}},[_vm._t(\"reset\",function(){return [_vm._v(\" ↻ \")]})],2):_vm._e(),(_vm.originalGraph === false)?_c('div',{staticClass:\"dockBtnScrollBar\"},[_c('div',{ref:\"dockBtnScrollControl\",staticClass:\"scrollBarControl\",style:('left:' + _vm.rotateControl.position + 'px'),on:{\"mousemove\":_vm.scrollBarControlMove,\"mousedown\":_vm.scrollBarControlOn,\"mouseleave\":_vm.scrollBarControlOff,\"mouseup\":_vm.scrollBarControlOff}}),(_vm.rotateControl.active == true)?_c('div',{staticClass:\"scrollBarText\",style:('left:' + _vm.rotateControl.position + 'px')},[_vm._v(\" \"+_vm._s(_vm.rotateImg.angle.toFixed(0) + '°')+\" \")]):_vm._e()]):_vm._e(),(_vm.originalGraph === false)?_c('div',{staticClass:\"dockBtn\",on:{\"click\":_vm.flipHorizontal}},[_vm._t(\"flipHorizontal\",function(){return [_vm._v(\" ⇆ \")]})],2):_vm._e(),(_vm.originalGraph === false)?_c('div',{staticClass:\"dockBtn\",on:{\"click\":_vm.flipVertically}},[_vm._t(\"turnRight\",function(){return [_vm._v(\" ⇅ \")]})],2):_vm._e()]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.drawImg.img != null),expression:\"drawImg.img != null\"}],ref:\"toolBoxControl\",staticClass:\"toolBoxControl\",on:{\"mousedown\":_vm.toolBoxMouseDown,\"mouseup\":_vm.toolBoxMouseUp,\"mousemove\":_vm.toolBoxMouseMove,\"mouseleave\":_vm.toolBoxMouseLeave}},[_c('div',{staticClass:\"toolBoxControlBox\"},[_c('div',{staticClass:\"controlBox\"},[_c('div',{staticClass:\"controlBoxInnerLine controlBoxInnerLineTop\"}),_c('div',{staticClass:\"controlBoxInnerLine controlBoxInnerLineBottom\"}),_c('div',{staticClass:\"controlBoxInnerLine controlBoxInnerLineLeft\"}),_c('div',{staticClass:\"controlBoxInnerLine controlBoxInnerLineRight\"}),_c('div',{staticClass:\"selectArea\"},[_vm._v(\" 宽:\"+_vm._s(_vm.showToolBoxWidth)+\" 高:\"+_vm._s(_vm.showToolBoxHeight)+\" (x:\"+_vm._s(_vm.showToolBoxX)+\",y:\"+_vm._s(_vm.showToolBoxY)+\") \")]),(_vm.sizeChange === true)?_c('div',{staticClass:\"leftUp controlBtn\",attrs:{\"data-name\":\"leftUp\"},on:{\"mousedown\":function($event){return _vm.controlBtnMouseDown($event, 'leftUp')}}}):_vm._e(),(_vm.sizeChange === true)?_c('div',{staticClass:\"leftDown controlBtn\",attrs:{\"data-name\":\"leftDown\"},on:{\"mousedown\":function($event){return _vm.controlBtnMouseDown($event, 'leftDown')}}}):_vm._e(),(_vm.sizeChange === true)?_c('div',{staticClass:\"rightUp controlBtn\",attrs:{\"data-name\":\"rightUp\"},on:{\"mousedown\":function($event){return _vm.controlBtnMouseDown($event, 'rightUp')}}}):_vm._e(),(_vm.sizeChange === true)?_c('div',{staticClass:\"rightDown controlBtn\",attrs:{\"data-name\":\"rightDown\"},on:{\"mousedown\":function($event){return _vm.controlBtnMouseDown($event, 'rightDown')}}}):_vm._e(),(_vm.sizeChange === true && !_vm.rate && _vm.toolBox.width > 20)?_c('div',{staticClass:\"topCenter controlBtn\",attrs:{\"data-name\":\"topCenter\"},on:{\"mousedown\":function($event){return _vm.controlBtnMouseDown($event, 'topCenter')}}}):_vm._e(),(_vm.sizeChange === true && !_vm.rate && _vm.toolBox.width > 20)?_c('div',{staticClass:\"downCenter controlBtn\",attrs:{\"data-name\":\"downCenter\"},on:{\"mousedown\":function($event){return _vm.controlBtnMouseDown($event, 'downCenter')}}}):_vm._e(),(_vm.sizeChange === true && !_vm.rate && _vm.toolBox.height > 20)?_c('div',{staticClass:\"leftCenter controlBtn\",attrs:{\"data-name\":\"leftCenter\"},on:{\"mousedown\":function($event){return _vm.controlBtnMouseDown($event, 'leftCenter')}}}):_vm._e(),(_vm.sizeChange === true && !_vm.rate && _vm.toolBox.height > 20)?_c('div',{staticClass:\"rightCenter controlBtn\",attrs:{\"data-name\":\"rightCenter\"},on:{\"mousedown\":function($event){return _vm.controlBtnMouseDown($event, 'rightCenter')}}}):_vm._e()]),_c('div',{staticClass:\"toolBoxControlLine toolBoxControlLineItem-1\"}),_c('div',{staticClass:\"toolBoxControlLine toolBoxControlLineItem-2\"}),_c('div',{staticClass:\"toolBoxControlLine toolBoxControlLineItem-3\"}),_c('div',{staticClass:\"toolBoxControlLine toolBoxControlLineItem-4\"})])]),_c('div',{staticClass:\"copyright\"},[(!_vm.DoNotDisplayCopyright)?_c('a',{attrs:{\"target\":\"_blank\",\"href\":\"https://github.com/acccccccb/vue-img-cutter\",\"rel\":\"nofollow\"}},[_vm._v(\" vue-img-cutter \"+_vm._s(_vm.version)+\" \")]):_vm._e()]),_c('canvas',{ref:\"canvasSelectBox\",staticClass:\"canvasSelectBox\",attrs:{\"width\":_vm.boxWidth,\"height\":_vm.boxHeight},on:{\"mousedown\":_vm.dropImgOn,\"mouseup\":_vm.dropImgOff,\"mousemove\":_vm.dropImgMove}}),_c('canvas',{ref:\"canvas\",staticClass:\"canvas\",attrs:{\"width\":_vm.boxWidth,\"height\":_vm.boxHeight}})])]),_c('div',{staticClass:\"i-dialog-footer\",staticStyle:{\"height\":\"40px\"}},[_c('input',{ref:\"inputFile\",staticStyle:{\"width\":\"1px\",\"height\":\"1px\",\"border\":\"none\",\"opacity\":\"0\"},attrs:{\"type\":\"file\",\"accept\":\"image/gif, image/jpeg ,image/png\"},on:{\"change\":_vm.putImgToCanv}}),_c('span',{on:{\"click\":_vm.chooseImg}},[_vm._t(\"choose\",function(){return [(_vm.showChooseBtn === true)?_c('div',{staticClass:\"btn btn-primary btn-primary-plain\"},[_vm._v(\" \"+_vm._s(_vm.label)+\" \")]):_vm._e()]})],2),_c('div',{staticClass:\"btn-group fr\"},[_c('span',{on:{\"click\":_vm.handleClose}},[_vm._t(\"cancel\",function(){return [_c('button',{staticClass:\"btn btn-default\",attrs:{\"type\":\"button\"}},[_vm._v(\"取消\")])]})],2),_c('span',{on:{\"click\":function($event){return _vm.cropPicture(false)}}},[_vm._t(\"confirm\",function(){return [_c('button',{staticClass:\"btn btn-primary\",staticStyle:{\"margin-left\":\"15px\"},attrs:{\"type\":\"button\",\"disabled\":!_vm.drawImg.img}},[_vm._v(\" 确定 \")])]})],2)])])])]),_c('div',{staticStyle:{\"clear\":\"both\"}})],1):_vm._e()]):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div v-if=\"showChooseBtn === true && isModal === true\" @click=\"handleOpen\">\n      <slot name=\"openImgCutter\" />\n      <slot name=\"open\" />\n    </div>\n    <button\n      v-if=\"!$slots.openImgCutter && !$slots.open && isModal === true\"\n      type=\"button\"\n      class=\"btn btn-primary\"\n      @click=\"handleOpen\"\n    >\n      {{ label }}\n    </button>\n    <transition name=\"fade\">\n      <div v-if=\"visible\" ref=\"mask\" :class=\"isModal === true ? 'mask vue-img-cutter' : ''\">\n        <div v-if=\"visible\" :class=\"isModal === true ? 'dialogBoxModal' : 'dialogBox'\">\n          <transition\n            name=\"fade\"\n            enter-class=\"fade-in-enter\"\n            enter-active-class=\"fade-in-active\"\n            leave-class=\"fade-out-enter\"\n            leave-active-class=\"fade-out-active\"\n          >\n            <div\n              ref=\"dialogMainModalRef\"\n              :class=\"isModal === true ? 'dialogMainModal' : 'dialogMain'\"\n              :style=\"'width:' + (isModal === true ? boxWidth + 32 : boxWidth) + 'px'\"\n            >\n              <div class=\"toolMain\">\n                <div v-if=\"isModal === true\" class=\"tool-title\">\n                  图片裁剪\n                  <span class=\"closeIcon\" @click=\"handleClose\">×</span>\n                </div>\n                <div\n                  ref=\"toolBox\"\n                  :style=\"'height:' + boxHeight + 'px;width:' + boxWidth + 'px'\"\n                  class=\"toolBox\"\n                  @mousemove=\"controlBtnMouseMove\"\n                  @mouseup=\"controlBtnMouseUp\"\n                  @mouseleave=\"controlBtnMouseUp\"\n                >\n                  <!--选取图片-->\n                  <div v-show=\"!drawImg.img && showChooseBtn === true\" class=\"tips\">\n                    <div class=\"btn btn-warning btn-xs\" @click=\"chooseImg\">\n                      {{ label }}\n                    </div>\n                  </div>\n                  <!--工具栏-->\n                  <div\n                    v-if=\"tool == true\"\n                    v-show=\"\n                      drawImg.img &&\n                        dropImg.active !== true &&\n                        controlBox.disable == true &&\n                        toolBox.disable == true\n                    \"\n                    class=\"dockMain\"\n                    :style=\"'background:' + toolBgc\"\n                    @mouseenter=\"dropImgOff\"\n                  >\n                    <div v-if=\"rate\" class=\"dockBtn\">\n                      <slot name=\"ratio\">\n                        Ratio:\n                      </slot>\n                      {{ rate }}\n                    </div>\n                    <div class=\"dockBtn\" @click=\"scaleReset\">\n                      <slot name=\"scaleReset\">\n                        Scale:\n                      </slot>\n                      {{ drawImg.swidth > 0 ? (drawImg.width / drawImg.swidth).toFixed(2) : '-' }}\n                    </div>\n                    <div v-if=\"originalGraph === false\" class=\"dockBtn\" @click=\"turnImg(-90)\">\n                      <slot name=\"turnLeft\">\n                        ↳\n                      </slot>\n                    </div>\n                    <div v-if=\"originalGraph === false\" class=\"dockBtn\" @click=\"turnImg(90)\">\n                      <slot name=\"turnRight\">\n                        ↲\n                      </slot>\n                    </div>\n                    <div v-if=\"originalGraph === false\" class=\"dockBtn\" @click=\"turnReset()\">\n                      <slot name=\"reset\">\n                        ↻\n                      </slot>\n                    </div>\n                    <div v-if=\"originalGraph === false\" class=\"dockBtnScrollBar\">\n                      <div\n                        ref=\"dockBtnScrollControl\"\n                        :style=\"'left:' + rotateControl.position + 'px'\"\n                        class=\"scrollBarControl\"\n                        @mousemove=\"scrollBarControlMove\"\n                        @mousedown=\"scrollBarControlOn\"\n                        @mouseleave=\"scrollBarControlOff\"\n                        @mouseup=\"scrollBarControlOff\"\n                      />\n                      <div\n                        v-if=\"rotateControl.active == true\"\n                        class=\"scrollBarText\"\n                        :style=\"'left:' + rotateControl.position + 'px'\"\n                      >\n                        {{ rotateImg.angle.toFixed(0) + '°' }}\n                      </div>\n                    </div>\n                    <div v-if=\"originalGraph === false\" class=\"dockBtn\" @click=\"flipHorizontal\">\n                      <slot name=\"flipHorizontal\">\n                        ⇆\n                      </slot>\n                    </div>\n                    <div v-if=\"originalGraph === false\" class=\"dockBtn\" @click=\"flipVertically\">\n                      <slot name=\"turnRight\">\n                        ⇅\n                      </slot>\n                    </div>\n                  </div>\n                  <!--裁剪区域-->\n                  <div\n                    v-show=\"drawImg.img != null\"\n                    ref=\"toolBoxControl\"\n                    class=\"toolBoxControl\"\n                    @mousedown=\"toolBoxMouseDown\"\n                    @mouseup=\"toolBoxMouseUp\"\n                    @mousemove=\"toolBoxMouseMove\"\n                    @mouseleave=\"toolBoxMouseLeave\"\n                  >\n                    <div class=\"toolBoxControlBox\">\n                      <div class=\"controlBox\">\n                        <!--蚂蚁线-->\n                        <div class=\"controlBoxInnerLine controlBoxInnerLineTop\" />\n                        <div class=\"controlBoxInnerLine controlBoxInnerLineBottom\" />\n                        <div class=\"controlBoxInnerLine controlBoxInnerLineLeft\" />\n                        <div class=\"controlBoxInnerLine controlBoxInnerLineRight\" />\n                        <!--工具栏提示-->\n                        <div class=\"selectArea\">\n                          宽:{{ showToolBoxWidth }} 高:{{ showToolBoxHeight }} (x:{{\n                            showToolBoxX\n                          }},y:{{ showToolBoxY }})\n                        </div>\n                        <!--操作杆-->\n                        <div\n                          v-if=\"sizeChange === true\"\n                          data-name=\"leftUp\"\n                          class=\"leftUp controlBtn\"\n                          @mousedown=\"controlBtnMouseDown($event, 'leftUp')\"\n                        />\n                        <div\n                          v-if=\"sizeChange === true\"\n                          data-name=\"leftDown\"\n                          class=\"leftDown controlBtn\"\n                          @mousedown=\"controlBtnMouseDown($event, 'leftDown')\"\n                        />\n                        <div\n                          v-if=\"sizeChange === true\"\n                          data-name=\"rightUp\"\n                          class=\"rightUp controlBtn\"\n                          @mousedown=\"controlBtnMouseDown($event, 'rightUp')\"\n                        />\n                        <div\n                          v-if=\"sizeChange === true\"\n                          data-name=\"rightDown\"\n                          class=\"rightDown controlBtn\"\n                          @mousedown=\"controlBtnMouseDown($event, 'rightDown')\"\n                        />\n\n                        <div\n                          v-if=\"sizeChange === true && !rate && toolBox.width > 20\"\n                          data-name=\"topCenter\"\n                          class=\"topCenter controlBtn\"\n                          @mousedown=\"controlBtnMouseDown($event, 'topCenter')\"\n                        />\n                        <div\n                          v-if=\"sizeChange === true && !rate && toolBox.width > 20\"\n                          data-name=\"downCenter\"\n                          class=\"downCenter controlBtn\"\n                          @mousedown=\"controlBtnMouseDown($event, 'downCenter')\"\n                        />\n                        <div\n                          v-if=\"sizeChange === true && !rate && toolBox.height > 20\"\n                          data-name=\"leftCenter\"\n                          class=\"leftCenter controlBtn\"\n                          @mousedown=\"controlBtnMouseDown($event, 'leftCenter')\"\n                        />\n                        <div\n                          v-if=\"sizeChange === true && !rate && toolBox.height > 20\"\n                          data-name=\"rightCenter\"\n                          class=\"rightCenter controlBtn\"\n                          @mousedown=\"controlBtnMouseDown($event, 'rightCenter')\"\n                        />\n                      </div>\n                      <div class=\"toolBoxControlLine toolBoxControlLineItem-1\" />\n                      <div class=\"toolBoxControlLine toolBoxControlLineItem-2\" />\n                      <div class=\"toolBoxControlLine toolBoxControlLineItem-3\" />\n                      <div class=\"toolBoxControlLine toolBoxControlLineItem-4\" />\n                    </div>\n                  </div>\n                  <div class=\"copyright\">\n                    <a\n                      v-if=\"!DoNotDisplayCopyright\"\n                      target=\"_blank\"\n                      href=\"https://github.com/acccccccb/vue-img-cutter\"\n                      rel=\"nofollow\"\n                    >\n                      vue-img-cutter {{ version }}\n                    </a>\n                  </div>\n                  <!--画布-->\n                  <canvas\n                    ref=\"canvasSelectBox\"\n                    class=\"canvasSelectBox\"\n                    :width=\"boxWidth\"\n                    :height=\"boxHeight\"\n                    @mousedown=\"dropImgOn\"\n                    @mouseup=\"dropImgOff\"\n                    @mousemove=\"dropImgMove\"\n                  />\n                  <canvas ref=\"canvas\" class=\"canvas\" :width=\"boxWidth\" :height=\"boxHeight\" />\n                </div>\n              </div>\n              <div class=\"i-dialog-footer\" style=\"height: 40px\">\n                <input\n                  ref=\"inputFile\"\n                  type=\"file\"\n                  accept=\"image/gif, image/jpeg ,image/png\"\n                  style=\"width: 1px; height: 1px; border: none; opacity: 0\"\n                  @change=\"putImgToCanv\"\n                >\n                <span @click=\"chooseImg\">\n                  <slot name=\"choose\">\n                    <div v-if=\"showChooseBtn === true\" class=\"btn btn-primary btn-primary-plain\">\n                      {{ label }}\n                    </div>\n                  </slot>\n                </span>\n                <div class=\"btn-group fr\">\n                  <span @click=\"handleClose\">\n                    <slot name=\"cancel\">\n                      <button type=\"button\" class=\"btn btn-default\">取消</button>\n                    </slot>\n                  </span>\n                  <span @click=\"cropPicture(false)\">\n                    <slot name=\"confirm\">\n                      <button\n                        type=\"button\"\n                        class=\"btn btn-primary\"\n                        style=\"margin-left: 15px\"\n                        :disabled=\"!drawImg.img\"\n                      >\n                        确定\n                      </button>\n                    </slot>\n                  </span>\n                </div>\n              </div>\n            </div>\n          </transition>\n          <div style=\"clear: both\" />\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n<script>\nconst config = {\n  name: 'vue-img-cutter',\n  version: '3.0.1',\n  description: 'A image crop plug-in for Vue,you can use it to rotate、zoom images and cut any size',\n  author: 'acccccccb <tabzhang@foxmail.com>',\n  private: false,\n  scripts: {\n    serve: 'vue-cli-service serve',\n    build: 'vue-cli-service build',\n    lint: 'vue-cli-service lint',\n  },\n  dependencies: {\n    'core-js': '^3.20.3',\n    'vue': '^3.2.29',\n  },\n  devDependencies: {\n    '@vue/cli-plugin-babel': '~4.5.15',\n    '@vue/cli-plugin-eslint': '~4.5.15',\n    '@vue/cli-service': '~4.5.15',\n    '@vue/compiler-sfc': '^3.2.29',\n    'babel-eslint': '^10.1.0',\n    'eslint': '^6.8.0',\n    'eslint-plugin-vue': '^7.20.0',\n  },\n  main: './src/index.js',\n  repository: {\n    type: 'git',\n    url: 'git+https://github.com/acccccccb/vue-img-cutter.git',\n  },\n  keywords: [\n    'image',\n    'crop',\n    'cutter',\n    'vue',\n    '裁剪',\n  ],\n  license: 'Apache2.0',\n  bugs: {\n    url: 'https://github.com/acccccccb/vue-img-cutter/issues',\n  },\n  homepage: 'https://ihtmlcss.com/demo/dist/#/croptool',\n  eslintConfig: {\n    root: true,\n    env: {\n      node: true,\n    },\n    extends: [\n      'plugin:vue/vue3-essential',\n      'eslint:recommended',\n    ],\n    parserOptions: {\n      parser: 'babel-eslint',\n    },\n    rules: {},\n  },\n  browserslist: [\n    '> 1%',\n    'last 2 versions',\n    'not dead',\n  ],\n}\n\nexport default {\n  name: 'ImgCutter',\n  model: ['label', 'boxWidth', 'boxHeight', 'rate', 'tool', 'DoNotDisplayCopyright'],\n  props: {\n    crossOrigin: {\n      // 是否设置图片跨域\n      type: Boolean,\n      default: false,\n      required: false,\n    },\n    crossOriginHeader: {\n      // 是否设置图片跨域\n      type: String,\n      default: '*',\n      required: false,\n    },\n    label: {\n      // 按钮文字\n      type: String,\n      default: '选择图片',\n      required: false,\n    },\n    isModal: {\n      // 是否已弹窗形式展示\n      type: Boolean,\n      default: true,\n      required: false,\n    },\n    lockScroll: {\n      // 是否在弹窗出现时锁定body\n      type: Boolean,\n      default: true,\n      required: false,\n    },\n    showChooseBtn: {\n      // 是否显示选择图片按钮 如果需要兼容IE9 则将此参数改为false\n      type: Boolean,\n      default: true,\n      required: false,\n    },\n    boxWidth: {\n      // 裁剪窗口高度\n      type: Number,\n      default: 800,\n      required: false,\n    },\n    boxHeight: {\n      // 裁剪窗口高度\n      type: Number,\n      default: 400,\n      required: false,\n    },\n    cutWidth: {\n      // 默认裁剪宽度\n      type: Number,\n      default: 200,\n      required: false,\n    },\n    cutHeight: {\n      // 默认裁剪高度\n      type: Number,\n      default: 200,\n      required: false,\n    },\n    rate: {\n      // 按比例裁剪\n      type: String,\n      default: null,\n      required: false,\n    },\n    tool: {\n      // 是否显示工具栏\n      type: Boolean,\n      default: true,\n      required: false,\n    },\n    toolBgc: {\n      // 工具栏背景色\n      type: String,\n      default: '#fff',\n      required: false,\n    },\n    imgMove: {\n      // 能否拖动图片\n      type: Boolean,\n      default: true,\n      required: false,\n    },\n    sizeChange: {\n      // 能否调整裁剪尺寸\n      type: Boolean,\n      default: true,\n      required: false,\n    },\n    originalGraph: {\n      // 是否为原图裁剪\n      type: Boolean,\n      default: false,\n      required: false,\n    },\n    moveAble: {\n      // 能否调整裁剪区域位置\n      type: Boolean,\n      default: true,\n      required: false,\n    },\n    previewMode: {\n      // 裁剪过程中是否返回裁剪结果 裁剪原图卡顿时将此项设置为false\n      type: Boolean,\n      default: true,\n      required: false,\n    },\n    CuttingOriginal: {\n      // 是否裁剪原图\n      type: Boolean,\n      default: false,\n      required: false,\n    },\n    WatermarkText: {\n      // 水印文字\n      type: String,\n      default: '',\n      required: false,\n    },\n    WatermarkTextFont: {\n      // 水印文字样式\n      type: String,\n      default: '12px Sans-serif',\n      required: false,\n    },\n    WatermarkTextColor: {\n      // 水印文字颜色\n      type: String,\n      default: '#fff',\n      required: false,\n    },\n    WatermarkTextX: {\n      // 水印横向位置\n      type: Number,\n      default: 0.95,\n      required: false,\n    },\n    WatermarkTextY: {\n      // 水印纵向位置\n      type: Number,\n      default: 0.95,\n      required: false,\n    },\n    smallToUpload: {\n      // 选择的图片宽高均小于裁剪宽高度时候直接上传原图\n      type: Boolean,\n      default: false,\n      required: false,\n    },\n    saveCutPosition: {\n      // 是否保存上一次裁剪位置\n      type: Boolean,\n      default: false,\n      required: false,\n    },\n    scaleAble: {\n      // 是否允许缩放图片\n      type: Boolean,\n      default: true,\n      required: false,\n    },\n    index: {\n      // 自定义参数 返回结果时会带入此值\n      default: null,\n      required: false,\n    },\n    fileType: {\n      // 文件类型\n      default: 'png',\n      required: false,\n      type: String,\n    },\n    toolBoxOverflow: {\n      // 是否允许裁剪框超出图片\n      type: Boolean,\n      default: true,\n      required: false,\n    },\n    DoNotDisplayCopyright: {\n      type: Boolean,\n      default: false,\n      required: false,\n    },\n    autoRotate: {\n      type: Number,\n      default: 0,\n      require: false,\n    },\n  },\n  data() {\n    let toolBoxWidth, toolBoxHeight\n\n    toolBoxWidth = this.boxWidth / 2\n    toolBoxHeight = this.boxHeight / 2\n    return {\n      version: '',\n      visible: false,\n      fileName: '',\n      cutImageObj: null,\n      onPrintImgTimmer: null,\n      toolBoxPosition: {\n        x: 0,\n        y: 0,\n      },\n      drawImg: {\n        img: null, // 规定要使用的图像、画布或视频\n        sx: 0, // 开始剪切的 x 坐标位置\n        sy: 0, // 开始剪切的 y 坐标位置\n        swidth: 0, // 被剪切图像的宽度\n        sheight: 0, // 被剪切图像的高度\n        x: 0, // 在画布上放置图像的 x 坐标位置\n        y: 0, // 在画布上放置图像的 y 坐标位置\n        width: 0, // 要使用的图像的宽度\n        height: 0, // 要使用的图像的高度\n      },\n      toolBox: {\n        disable: true,\n        width: toolBoxWidth,\n        height: toolBoxHeight,\n        x: 0,\n        y: 0,\n        boxMove: {\n          start: {\n            x: 0,\n            y: 0,\n          },\n          moveTo: {\n            x: 0,\n            y: 0,\n          },\n        },\n      },\n      dropImg: {\n        active: false,\n        pageX: 0,\n        pageY: 0,\n        params: {},\n      },\n      // 旋转\n      rotateImg: {\n        angle: 0,\n      },\n      rotateControl: {\n        active: false,\n        start: {\n          x: 0,\n          y: 0,\n        },\n        position: 100,\n      },\n      // 缩放\n      scaleImg: {\n        rate: 0,\n        params: {},\n      },\n      controlBox: {\n        disable: true,\n        btnName: '',\n        start: {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0,\n        },\n      },\n      selectBox: false,\n      selectBoxColor: 'rgba(0,0,0,0.6)',\n      isFlipHorizontal: false, // 是否水平翻转\n      isFlipVertically: false, // 是否垂直翻转\n    }\n  },\n  computed: {\n    showToolBoxWidth() {\n      let result\n      if (!this.originalGraph)\n        result = this.toolBox.width\n      else\n        result = this.toolBox.width / (this.drawImg.width / this.drawImg.swidth)\n\n      return Number(result).toFixed(0)\n    },\n    showToolBoxHeight() {\n      let result\n      if (!this.originalGraph)\n        result = this.toolBox.height\n      else\n        result = this.toolBox.height / (this.drawImg.width / this.drawImg.swidth)\n\n      return Number(result).toFixed(0)\n    },\n    showToolBoxX() {\n      let result\n      result = this.toolBoxPosition.x\n      return Number(result).toFixed(0)\n    },\n    showToolBoxY() {\n      let result\n      result = this.toolBoxPosition.y\n      return Number(result).toFixed(0)\n    },\n  },\n  watch: {\n    autoRotate(nv) {\n      this.autoTurnImg(nv)\n    },\n  },\n  mounted() {\n    this.version = config.version\n    // 是否为弹窗模式\n    if (this.isModal === false) {\n      this.visible = true\n      this.$nextTick(() => {\n        if (this.$refs.toolBox) {\n          this.$refs.toolBox.onmousewheel = this.scaleImgWheel\n          this.$refs.toolBox.addEventListener('DOMMouseScroll', this.scaleImgWheel)\n        }\n      })\n    }\n  },\n  methods: {\n    handleOpen(img) {\n      const init = (callback) => {\n        if (this.$refs.toolBox) {\n          this.$refs.toolBox.onmousewheel = this.scaleImgWheel\n          this.$refs.toolBox.addEventListener('DOMMouseScroll', this.scaleImgWheel)\n        }\n\n        // 判断下窗口高度\n        if (this.isModal === true) {\n          if (this.lockScroll === true)\n            document.body.style.overflowY = 'hidden'\n\n          const dialogBoxHeight = this.$refs.dialogMainModalRef.offsetHeight + 200\n\n          const windowHeight = window.innerHeight\n\n          const mask = this.$refs.mask\n\n          if (dialogBoxHeight > windowHeight)\n            mask.style.overflowY = 'scroll'\n          else\n            mask.style.overflowY = 'hidden'\n        }\n        if (callback && typeof callback === 'function')\n          callback()\n      }\n\n      // 如果传入了图片\n      if (img && typeof img == 'object' && img.src) {\n        if (img.name) {\n          const $image = new Image()\n\n          if (this.crossOrigin === true)\n            $image.crossOrigin = this.crossOriginHeader\n\n          $image.name = img.name\n          // $image.width = img.width;\n          // $image.height = img.height;\n          // $image.style.width = '1px';\n          // $image.style.height = '1px';\n          $image.style.position = 'fixed'\n          $image.style.top = `${-5000}px`\n          $image.style.opacity = 0\n          $image.onerror = (e) => {\n            console.error('图片加载失败')\n            this.$emit('error', {\n              index: this.index,\n              event: e,\n              msg: '图片加载失败',\n            })\n            this.clearCutImageObj()\n          }\n          $image.onload = () => {\n            if ($image.complete === true) {\n              this.visible = true\n              this.$nextTick(() => {\n                init(() => {\n                  this.importImgToCanv($image)\n                })\n              })\n            }\n            else {\n              throw new Error('图片加载失败')\n              // this.handleClose();\n            }\n          }\n          $image.src = img.src\n          this.cutImageObj = $image\n          document.body.appendChild($image)\n          this.$emit('onChooseImg', img, this.index)\n        }\n        else {\n          throw new Error('传入参数必须包含：src,name')\n        }\n      }\n      else {\n        this.visible = true\n        this.$nextTick(() => {\n          init()\n        })\n      }\n    },\n    handleClose() {\n      this.clearAll()\n      if (this.isModal === true) {\n        if (this.lockScroll === true)\n          document.body.style.overflowY = 'scroll'\n\n        this.$nextTick(() => {\n          this.visible = false\n        })\n      }\n    },\n    // 选择图片 e.stopPropagation();\n    chooseImg() {\n      this.$refs.inputFile.click()\n    },\n    importImgToCanv(img) {\n      const imgHeight = img.height\n\n      const imgWidth = img.width\n\n      const boxWidth = this.boxWidth\n\n      const boxHeight = this.boxHeight\n\n      let rate\n\n      const drawImg = { ...this.drawImg }\n\n      this.fileName = img.name\n      drawImg.img = img\n      this.scaleImg.rate = imgWidth / imgHeight // 缩放时用到此参数\n      if (imgHeight < boxHeight && imgWidth < boxWidth) {\n        rate = 1\n        drawImg.x = (boxWidth - imgWidth) / 2\n        drawImg.y = (boxHeight - imgHeight) / 2\n      }\n      else {\n        if (imgWidth / imgHeight <= boxWidth / boxHeight) {\n          // 计算宽高比\n          rate = boxHeight / imgHeight\n          drawImg.x = (boxWidth - imgWidth * rate) / 2\n        }\n        else {\n          rate = boxWidth / imgWidth\n          drawImg.y = (boxHeight - imgHeight * rate) / 2\n        }\n      }\n      drawImg.swidth = imgWidth\n      drawImg.sheight = imgHeight\n      drawImg.width = imgWidth * rate\n      drawImg.height = imgHeight * rate\n      drawImg.x = (boxWidth - drawImg.width) / 2\n      drawImg.y = (boxHeight - drawImg.height) / 2\n      // this.$set(this, 'drawImg', drawImg);\n      this.drawImg = drawImg\n      this.printImg()\n      this.putToolBox()\n    },\n    // 将选择的图片绘制到画布\n    putImgToCanv(e) {\n      let file\n\n      if (e.target.files) {\n        file = e.target.files[0] || null\n      }\n      else {\n        // 如果是IE9及以下\n        console.error('IE9及以下需要自己传入image对象')\n        // this.$emit('importImage',e);\n        return false\n      }\n      if (file) {\n        this.fileName = file.name\n        const reader = new FileReader()\n\n        reader.readAsDataURL(file)\n        reader.onload = (result) => {\n          // 图片base64化\n          const newUrl = result.target.result\n\n          const img = document.createElement('img')\n\n          img.src = newUrl\n          const timmer = setInterval(() => {\n            if (reader.readyState === 2) {\n              clearInterval(timmer)\n              if (\n                !this.sizeChange\n                                    && this.smallToUpload\n                                    && img.width <= this.cutWidth\n                                    && img.height <= this.cutHeight\n              ) {\n                this.handleClose()\n                file.name = this.changeFileName(file.name, this.fileType)\n                this.$emit('cutDown', {\n                  filename: this.changeFileName(file.name, this.fileType),\n                  file,\n                  index: this.index,\n                })\n                return\n              }\n              const imgHeight = img.height\n\n              const imgWidth = img.width\n\n              const boxWidth = this.boxWidth\n\n              const boxHeight = this.boxHeight\n\n              let rate\n\n              const drawImg = { ...this.drawImg }\n\n              drawImg.img = img\n              this.scaleImg.rate = imgWidth / imgHeight // 缩放时用到此参数\n              if (imgHeight < boxHeight && imgWidth < boxWidth) {\n                rate = 1\n                drawImg.x = (boxWidth - imgWidth) / 2\n                drawImg.y = (boxHeight - imgHeight) / 2\n              }\n              else {\n                if (imgWidth / imgHeight <= boxWidth / boxHeight) {\n                  // 计算宽高比\n                  rate = boxHeight / imgHeight\n                  drawImg.x = (boxWidth - imgWidth * rate) / 2\n                }\n                else {\n                  rate = boxWidth / imgWidth\n                  drawImg.y = (boxHeight - imgHeight * rate) / 2\n                }\n              }\n              drawImg.swidth = imgWidth\n              drawImg.sheight = imgHeight\n              drawImg.width = imgWidth * rate\n              drawImg.height = imgHeight * rate\n              drawImg.x = (boxWidth - drawImg.width) / 2\n              drawImg.y = (boxHeight - drawImg.height) / 2\n              // this.$set(this, 'drawImg', drawImg);\n              this.drawImg = drawImg\n              this.printImg()\n              this.putToolBox()\n            }\n          }, 200)\n        }\n        this.$emit('onChooseImg', file, this.index)\n      }\n    },\n    putToolBox() {\n      if (\n        this.toolBox.width === this.boxWidth / 2\n                    || this.toolBox.height === this.boxHeight / 2\n                    || this.saveCutPosition === false\n      ) {\n        this.toolBox.width = this.cutWidth > this.boxWidth ? this.boxWidth : this.cutWidth\n        this.toolBox.height = this.cutHeight > this.boxHeight ? this.boxHeight : this.cutHeight\n      }\n      if ((this.toolBox.x === 0 && this.toolBox.y === 0) || this.saveCutPosition === false) {\n        this.toolBox.x = this.boxWidth / 2 - this.toolBox.width / 2\n        this.toolBox.y = this.boxHeight / 2 - this.toolBox.height / 2\n      }\n      this.checkToolBoxOverflow().then(() => {\n        this.printImg()\n      })\n\n      this.drawControlBox(this.toolBox.width, this.toolBox.height, this.toolBox.x, this.toolBox.y)\n    },\n    // 判断裁剪框是否超出图片\n    checkToolBoxOverflow() {\n      return new Promise((resolve) => {\n        if (!this.toolBoxOverflow) {\n          // 如果裁剪框不能超出图片 则先判断图片尺寸\n          // 如果图片尺寸长宽都超过裁剪框 不做处理\n          // 如果图片尺寸小于裁剪框 将图片缩放至合适尺寸\n          if (this.drawImg.width < this.toolBox.width || this.drawImg.height < this.toolBox.height) {\n            const p = this.drawImg.width / this.drawImg.height\n            if (this.drawImg.width < this.toolBox.width) {\n              this.drawImg.width = this.toolBox.width\n              this.drawImg.height = this.drawImg.width / p\n            }\n            if (this.drawImg.height < this.toolBox.height) {\n              this.drawImg.height = this.toolBox.height\n              this.drawImg.width = this.drawImg.height * p\n            }\n            // 根据图片缩放重新调整位置\n            this.drawImg.x = (this.boxWidth - this.drawImg.width) / 2\n            this.drawImg.y = (this.boxHeight - this.drawImg.height) / 2\n          }\n          // 检查图片坐标是否超出\n          console.log(\n            'this.drawImg.y > this.toolBox.y',\n            this.drawImg.y + this.drawImg.height,\n            this.toolBox.y + this.toolBox.height,\n          )\n          // 判断左右边界\n          if (this.drawImg.x > this.toolBox.x)\n            this.drawImg.x = this.toolBox.x\n\n          if (this.drawImg.x + this.drawImg.width < this.toolBox.x + this.toolBox.width)\n            this.drawImg.x = this.toolBox.x + this.toolBox.width - this.drawImg.width\n\n          // 判断上下边界\n          if (this.drawImg.y > this.toolBox.y)\n            this.drawImg.y = this.toolBox.y\n\n          if (this.drawImg.y + this.drawImg.height < this.toolBox.y + this.toolBox.height)\n            this.drawImg.y = this.toolBox.y + this.toolBox.height - this.drawImg.height\n        }\n        resolve()\n      })\n    },\n    isSupportFileApi() {\n      if (\n        window.File\n                    && window.FileList\n                    && window.FileReader\n                    && window.Blob\n                    && !navigator.userAgent.includes('Edge')\n                    && !navigator.userAgent.includes('MSIE')\n                    && !navigator.userAgent.includes('Trident')\n      )\n        return true\n\n      return false\n    },\n    dataURLtoFile(dataurl, filename) {\n      // 将图片转换为Base64\n      const arr = dataurl.split(',')\n      const mime = arr[0].match(/:(.*?);/)[1]\n      const bstr = atob(arr[1])\n      let n = bstr.length\n      const u8arr = new Uint8Array(n)\n\n      while (n--)\n        u8arr[n] = bstr.charCodeAt(n)\n\n      if (this.isSupportFileApi()) {\n        const file = new File([u8arr], filename, { type: mime })\n\n        return file\n      }\n      return '不支持File对象'\n    },\n    // clear both\n    clearAll() {\n      const _this = this\n\n      const c = _this.$refs.canvas\n\n      const ctx = c.getContext('2d')\n\n      ctx.clearRect(0, 0, c.width, c.height)\n      const c1 = _this.$refs.canvasSelectBox\n\n      const ctx1 = c1.getContext('2d')\n\n      ctx1.clearRect(0, 0, c1.width, c1.height)\n      const sx = _this.drawImg.sx\n\n      const sy = _this.drawImg.sy\n\n      this.drawImg = {\n        img: null, // 规定要使用的图像、画布或视频\n        sx, // 开始剪切的 x 坐标位置\n        sy, // 开始剪切的 y 坐标位置\n        swidth: 0, // 被剪切图像的宽度\n        sheight: 0, // 被剪切图像的高度\n        x: 0, // 在画布上放置图像的 x 坐标位置\n        y: 0, // 在画布上放置图像的 y 坐标位置\n        width: 0, // 要使用的图像的宽度\n        height: 0, // 要使用的图像的高度\n      }\n      this.isFlipHorizontal = false\n      this.isFlipVertically = false\n      this.$refs.inputFile.value = ''\n      this.rotateImg.angle = 0\n      this.drawImg.img = null\n      this.turnReset()\n      this.clearCutImageObj()\n      this.$emit('onClearAll', this.index)\n    },\n    clearCutImageObj() {\n      if (this.cutImageObj !== null && this.cutImageObj !== undefined) {\n        if (typeof this.cutImageObj.remove === 'function')\n          this.cutImageObj.remove()\n        else\n          this.cutImageObj.removeNode()\n      }\n      this.cutImageObj = null\n    },\n    // draw control\n    drawControlBox(width, height, x, y) {\n      // 裁剪框是否能够超出图片\n      if (!this.toolBoxOverflow) {\n        // 如果不允许超出图片范围 则也不允许反选\n        if (width < 1)\n          width = 1\n\n        if (height < 1)\n          height = 1\n\n        if (width > this.drawImg.width)\n          width = this.drawImg.width\n\n        if (height > this.drawImg.height)\n          height = this.drawImg.height\n\n        if (x < this.drawImg.x)\n          x = this.drawImg.x\n\n        if (y < this.drawImg.y)\n          y = this.drawImg.y\n\n        if (x > this.drawImg.x + this.drawImg.width - width)\n          x = this.drawImg.x + this.drawImg.width - width\n\n        if (y > this.drawImg.y + this.drawImg.height - height)\n          y = this.drawImg.y + this.drawImg.height - height\n      }\n      // 阻止超出裁剪控件边界\n      if (width > this.boxWidth)\n        width = this.boxWidth\n\n      if (height > this.boxHeight)\n        height = this.boxHeight\n\n      if (x < 0)\n        x = 0\n\n      if (y < 0)\n        y = 0\n\n      const $toolBoxControl = this.$refs.toolBoxControl\n\n      const c = this.$refs.canvasSelectBox\n\n      const ctx = c.getContext('2d')\n\n      ctx.fillStyle = this.selectBoxColor\n      ctx.clearRect(0, 0, c.width, c.height)\n      ctx.fillRect(0, 0, c.width, c.height)\n\n      let toolBoxControlWidth, toolBoxControlHeight\n\n      if (this.rate && this.rate !== '') {\n        const p = this.rate.split(':')[0] / this.rate.split(':')[1]\n\n        if (p >= 1) {\n          toolBoxControlWidth = width\n          toolBoxControlHeight = width / p\n          if (toolBoxControlHeight + y > this.drawImg.y + this.drawImg.height) {\n            toolBoxControlHeight = this.drawImg.y + this.drawImg.height - y\n            toolBoxControlWidth = toolBoxControlHeight * p\n          }\n        }\n        else {\n          toolBoxControlWidth = height * p\n          toolBoxControlHeight = height\n        }\n      }\n      else {\n        toolBoxControlWidth = width\n        toolBoxControlHeight = height\n      }\n      this.toolBox.width = Math.abs(toolBoxControlWidth)\n      this.toolBox.height = Math.abs(toolBoxControlHeight)\n\n      $toolBoxControl.style.width = `${Math.abs(toolBoxControlWidth)}px`\n      $toolBoxControl.style.height = `${Math.abs(toolBoxControlHeight)}px`\n\n      this.toolBox.boxMove.moveTo.x = x\n      this.toolBox.boxMove.moveTo.y = y\n      if (toolBoxControlWidth < 0)\n        x = x + toolBoxControlWidth\n\n      if (toolBoxControlHeight < 0)\n        y = y + toolBoxControlHeight\n\n      if (x + this.toolBox.width > this.boxWidth)\n        x = this.boxWidth - this.toolBox.width\n\n      if (x < 0)\n        x = 0\n\n      if (y + this.toolBox.height > this.boxHeight)\n        y = this.boxHeight - this.toolBox.height\n\n      if (y < 0)\n        y = 0\n\n      this.toolBoxPosition.x = x\n      this.toolBoxPosition.y = y\n\n      $toolBoxControl.style.left = `${x}px`\n      $toolBoxControl.style.top = `${y}px`\n\n      ctx.clearRect(x, y, Math.abs(toolBoxControlWidth), Math.abs(toolBoxControlHeight))\n      if (this.onPrintImgTimmer)\n        clearTimeout(this.onPrintImgTimmer)\n\n      this.onPrintImgTimmer = setTimeout(() => {\n        this.cropPicture(true)\n      }, 100)\n    },\n\n    resetToolBox() {\n      if (this.toolBox.width < 0)\n        this.toolBox.boxMove.moveTo.x = this.toolBox.x - this.toolBox.width\n\n      if (this.toolBox.height < 0)\n        this.toolBox.boxMove.moveTo.y = this.toolBox.y - this.toolBox.height\n\n      this.toolBox.width = Math.abs(this.toolBox.width)\n      this.toolBox.height = Math.abs(this.toolBox.height)\n    },\n    // toolBoxMouseDown\n    toolBoxMouseDown(e) {\n      const $toolBox = this.$refs.toolBoxControl\n\n      this.toolBox.x = parseInt($toolBox.style.left.split('px')[0])\n\n      this.toolBox.y = parseInt($toolBox.style.top.split('px')[0])\n\n      this.toolBox.disable = false\n      this.dropImg.active = false\n      this.toolBox.boxMove.start = {\n        x: e.pageX,\n        y: e.pageY,\n      }\n    },\n    toolBoxMouseMove(e) {\n      if (this.dropImg.active)\n        this.dropImgMove(e)\n\n      if (this.toolBox.disable === false && this.moveAble === true) {\n        const offsetX = e.pageX - this.toolBox.boxMove.start.x\n\n        const offsetY = e.pageY - this.toolBox.boxMove.start.y\n\n        const x = this.toolBox.x + offsetX\n\n        const y = this.toolBox.y + offsetY\n\n        this.drawControlBox(this.toolBox.width, this.toolBox.height, x, y)\n      }\n    },\n    toolBoxMouseLeave() {\n      this.toolBox.disable = true\n      if (this.onPrintImgTimmer)\n        clearTimeout(this.onPrintImgTimmer)\n\n      this.onPrintImgTimmer = setTimeout(() => {\n        this.cropPicture(true)\n      }, 100)\n      this.resetToolBox()\n    },\n    toolBoxMouseUp() {\n      this.toolBox.x = parseInt(this.toolBoxPosition.x)\n      this.toolBox.y = parseInt(this.toolBoxPosition.y)\n      this.toolBox.disable = true\n      this.dropImg.active = false\n      this.resetToolBox()\n    },\n    // 绘制图片\n    printImg() {\n      if (this.drawImg.img) {\n        const canv = this.$refs.canvas\n\n        const ctx = canv.getContext('2d')\n\n        // 文字水印\n        ctx.font = '18px bold 黑体'\n        ctx.fillStyle = '#ff0'\n        ctx.textAlign = 'center'\n        ctx.textBaseline = 'middle'\n        ctx.save()\n        ctx.clearRect(0, 0, canv.width, canv.height)\n        ctx.translate(this.drawImg.x + this.drawImg.width / 2, this.drawImg.y + this.drawImg.height / 2)\n        ctx.rotate((this.rotateImg.angle * Math.PI) / 180)\n        ctx.translate(\n          -(this.drawImg.x + this.drawImg.width / 2),\n          -(this.drawImg.y + this.drawImg.height / 2),\n        )\n        ctx.translate(this.drawImg.x, this.drawImg.y)\n        ctx.scale(this.isFlipHorizontal ? -1 : 1, this.isFlipVertically ? -1 : 1)\n        ctx.drawImage(\n          this.drawImg.img,\n          this.drawImg.sx,\n          this.drawImg.sy,\n          this.drawImg.swidth,\n          this.drawImg.sheight,\n          this.isFlipHorizontal ? -this.drawImg.width : 0,\n          this.isFlipVertically ? -this.drawImg.height : 0,\n          this.drawImg.width,\n          this.drawImg.height,\n        )\n        ctx.translate(-this.drawImg.x, this.drawImg.y)\n\n        ctx.restore()\n        if (this.onPrintImgTimmer)\n          clearTimeout(this.onPrintImgTimmer)\n\n        this.onPrintImgTimmer = setTimeout(() => {\n          this.cropPicture(true)\n        }, 100)\n      }\n    },\n    // 拖动图片\n    dropImgOn(e) {\n      if (this.imgMove === true) {\n        this.dropImg.active = true\n        this.dropImg.params = { ...this.drawImg }\n        this.dropImg.pageX = e.pageX\n        this.dropImg.pageY = e.pageY\n      }\n    },\n    dropImgOff() {\n      this.dropImg.active = false\n      if (this.onPrintImgTimmer)\n        clearTimeout(this.onPrintImgTimmer)\n\n      this.onPrintImgTimmer = setTimeout(() => {\n        this.cropPicture(true)\n      }, 100)\n    },\n    dropImgMove(e) {\n      if (this.dropImg.active && this.drawImg.img) {\n        const drawImg = { ...this.drawImg }\n        drawImg.x = this.dropImg.params.x - (this.dropImg.pageX - e.pageX)\n        drawImg.y = this.dropImg.params.y - (this.dropImg.pageY - e.pageY)\n        // 裁剪框是否能够超出图片\n        if (!this.toolBoxOverflow) {\n          if (drawImg.x > this.toolBox.x)\n            drawImg.x = this.toolBox.x\n\n          if (drawImg.x < this.toolBox.x + this.toolBox.width - drawImg.width)\n            drawImg.x = this.toolBox.x + this.toolBox.width - drawImg.width\n\n          if (drawImg.y > this.toolBox.y)\n            drawImg.y = this.toolBox.y\n\n          if (drawImg.y < this.toolBox.y + this.toolBox.height - drawImg.height)\n            drawImg.y = this.toolBox.y + this.toolBox.height - drawImg.height\n        }\n        // this.$set(this, 'drawImg', drawImg);\n        this.drawImg = drawImg\n        this.printImg()\n        e.stopPropagation()\n      }\n    },\n    // 缩放\n    scaleReset() {\n      this.drawImg.width = this.drawImg.swidth\n      this.drawImg.height = this.drawImg.sheight\n      this.printImg()\n    },\n    scaleImgWheel(e) {\n      if (this.drawImg.img && this.scaleAble === true) {\n        let scale\n\n        // e是FF的事件。window.event是chrome/ie/opera的事件\n        const ee = e || window.event\n\n        if (ee.wheelDelta) {\n          // IE/Opera/Chrome\n          scale = -(ee.wheelDelta / 40)\n        }\n        else if (ee.detail) {\n          // Firefox\n          scale = ee.detail\n        }\n\n        const widthLimit = 50\n        this.drawImg.x\n                        = this.drawImg.width - scale * 9 > widthLimit ? this.drawImg.x + scale * 3 : this.drawImg.x\n        this.drawImg.y\n                        = this.drawImg.width - scale * 9 > widthLimit ? this.drawImg.y + scale * 3 : this.drawImg.y\n        this.drawImg.width\n                        = this.drawImg.width - scale * 9 > widthLimit ? this.drawImg.width - scale * 9 : widthLimit\n        this.drawImg.height = this.drawImg.width / this.scaleImg.rate\n\n        this.checkToolBoxOverflow().then(() => {\n          this.printImg()\n          if (this.onPrintImgTimmer)\n            clearTimeout(this.onPrintImgTimmer)\n\n          this.onPrintImgTimmer = setTimeout(() => {\n            this.cropPicture(true)\n          }, 100)\n        })\n      }\n      // let scrollTop = this.$refs['mask'].scrollTop;\n      // window.scrollTo(this.$refs['mask'].scrollLeft,scrollTop);\n      e.preventDefault()\n      e.returnValue = false\n      return false\n    },\n    // 水平翻转\n    flipHorizontal() {\n      if (this.drawImg.img) {\n        if (this.isFlipHorizontal == false)\n          this.isFlipHorizontal = true\n        else\n          this.isFlipHorizontal = false\n\n        this.printImg()\n      }\n    },\n    // 垂直翻转\n    flipVertically() {\n      if (this.drawImg.img) {\n        if (this.isFlipVertically == false)\n          this.isFlipVertically = true\n        else\n          this.isFlipVertically = false\n\n        this.printImg()\n      }\n    },\n    // 旋转\n    turnImg(angle) {\n      const startAngle = this.rotateImg.angle\n\n      const turnAngle = startAngle + angle\n\n      if (turnAngle >= -180 && turnAngle <= 180) {\n        this.rotateImg.angle = turnAngle\n        this.rotateControl.position = (turnAngle / 180) * 100 + 100\n        this.printImg('rotate')\n      }\n    },\n    autoTurnImg(angle) {\n      const startAngle = this.rotateImg.angle\n      const turnAngle = startAngle + angle\n      if (turnAngle >= -180 && turnAngle <= 180) {\n        this.rotateImg.angle = turnAngle\n        this.rotateControl.position = (turnAngle / 180) * 100 + 100\n        this.printImg('rotate')\n      }\n    },\n    turnReset() {\n      this.rotateImg.angle = 0\n      this.rotateControl.position = 100\n      this.printImg('rotate')\n    },\n    // control box\n    controlBtnMouseDown(e, btnName) {\n      this.controlBox.disable = false\n      this.controlBox.btnName = btnName\n      this.controlBox.start.x = e.clientX\n      this.controlBox.start.y = e.clientY\n      this.controlBox.start.width = this.toolBox.width\n      this.controlBox.start.height = this.toolBox.height\n      e.stopPropagation()\n    },\n    controlBtnMouseUp(e) {\n      this.controlBox.disable = true\n      this.dropImgOff()\n      this.resetToolBox()\n      this.toolBoxMouseUp()\n      e.stopPropagation()\n    },\n\n    controlBtnMouseMove(e) {\n      if (this.controlBox.disable === false) {\n        const offsetX = e.clientX - this.controlBox.start.x\n\n        const offsetY = e.clientY - this.controlBox.start.y\n\n        let x, y\n\n        if (this.controlBox.btnName == 'leftUp') {\n          if (!this.rate) {\n            x = this.toolBox.x + offsetX\n            y = this.toolBox.y + offsetY\n          }\n          else {\n            const p = this.rate.split(':')[0] / this.rate.split(':')[1]\n\n            if (p >= 1) {\n              x = this.toolBox.x + offsetX\n              y = this.toolBox.y + offsetX / p\n            }\n            else {\n              x = this.toolBox.x + offsetY * p\n              y = this.toolBox.y + offsetY\n            }\n          }\n          this.toolBox.width = this.controlBox.start.width - offsetX\n          this.toolBox.height = this.controlBox.start.height - offsetY\n        }\n        if (this.controlBox.btnName == 'rightUp') {\n          if (!this.rate) {\n            x = this.toolBox.x\n            y = this.toolBox.y + offsetY\n          }\n          else {\n            const p = this.rate.split(':')[0] / this.rate.split(':')[1]\n\n            if (p >= 1) {\n              x = this.toolBox.x\n              y = this.toolBox.y - offsetX / p\n            }\n            else {\n              x = this.toolBox.x\n              y = this.toolBox.y + offsetY\n            }\n          }\n          this.toolBox.width = this.controlBox.start.width + offsetX\n          this.toolBox.height = this.controlBox.start.height - offsetY\n        }\n        if (this.controlBox.btnName == 'rightDown') {\n          x = this.toolBox.x\n          y = this.toolBox.y\n          this.toolBox.width = this.controlBox.start.width + offsetX\n          this.toolBox.height = this.controlBox.start.height + offsetY\n        }\n        if (this.controlBox.btnName == 'leftDown') {\n          if (!this.rate) {\n            x = this.toolBox.x + offsetX\n            y = this.toolBox.y\n          }\n          else {\n            const p = this.rate.split(':')[0] / this.rate.split(':')[1]\n\n            if (p >= 1) {\n              x = this.toolBox.x + offsetX\n              y = this.toolBox.y\n            }\n            else {\n              x = this.toolBox.x + -offsetY * p\n              y = this.toolBox.y\n            }\n          }\n          this.toolBox.width = this.controlBox.start.width - offsetX\n          this.toolBox.height = this.controlBox.start.height + offsetY\n        }\n        if (this.controlBox.btnName == 'topCenter') {\n          x = this.toolBox.x\n          y = this.toolBox.y + offsetY\n          this.toolBox.width = this.controlBox.start.width\n          this.toolBox.height = this.controlBox.start.height - offsetY\n        }\n        if (this.controlBox.btnName == 'downCenter') {\n          x = this.toolBox.x\n          y = this.toolBox.y\n          this.toolBox.width = this.controlBox.start.width\n          this.toolBox.height = this.controlBox.start.height + offsetY\n        }\n        if (this.controlBox.btnName == 'leftCenter') {\n          x = this.toolBox.x + offsetX\n          y = this.toolBox.y\n          this.toolBox.width = this.controlBox.start.width - offsetX\n          this.toolBox.height = this.controlBox.start.height\n        }\n        if (this.controlBox.btnName == 'rightCenter') {\n          x = this.toolBox.x\n          y = this.toolBox.y\n          this.toolBox.width = this.controlBox.start.width + offsetX\n          this.toolBox.height = this.controlBox.start.height\n        }\n        this.drawControlBox(this.toolBox.width, this.toolBox.height, x, y)\n      }\n      e.stopPropagation()\n    },\n    changeFileName(fileName, type) {\n      const index = fileName.lastIndexOf('.')\n\n      return fileName.substr(0, index + 1) + (type === 'jpeg' ? 'jpg' : type)\n    },\n    cropPicture(doNotReset) {\n      const _this = this\n\n      if (this.drawImg.img) {\n        // get img\n        const canvas = this.$refs.canvas\n\n        // 文字水印\n        if (this.WatermarkText && !doNotReset) {\n          const ctx2 = canvas.getContext('2d')\n\n          ctx2.font = this.WatermarkTextFont\n          ctx2.fillStyle = this.WatermarkTextColor\n          ctx2.textAlign = 'right'\n          ctx2.textBaseline = 'bottom'\n          ctx2.fillText(\n            this.WatermarkText,\n            this.toolBox.x + this.toolBox.width * this.WatermarkTextX,\n            this.toolBox.y + this.toolBox.height * this.WatermarkTextY,\n          )\n        }\n\n        const tempImg = new Image()\n\n        if (this.crossOrigin === true)\n          tempImg.crossOrigin = this.crossOriginHeader\n\n        tempImg.src = canvas.toDataURL(`image/${this.fileType}`)\n\n        if (!HTMLCanvasElement.prototype.toBlob) {\n          Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\n            value: (callback, type, quality) => {\n              if (window.atob) {\n                setTimeout(() => {\n                  const binStr = atob(canvas.toDataURL(type, quality).split(',')[1])\n\n                  const len = binStr.length\n                  const arr = new Uint8Array(len)\n\n                  let NewBlob\n\n                  for (let i = 0; i < len; i++)\n                    arr[i] = binStr.charCodeAt(i)\n\n                  try {\n                    NewBlob = new Blob([arr], {\n                      type: `image/${_this.fileType}`,\n                    })\n                  }\n                  catch (e) {\n                    window.BlobBuilder\n                                                = window.BlobBuilder\n                                                || window.WebKitBlobBuilder\n                                                || window.MozBlobBuilder\n                                                || window.MSBlobBuilder\n                    if (e.name == 'TypeError' && window.BlobBuilder) {\n                      const BlobBuilder = window.BlobBuilder\n\n                      const bb = new BlobBuilder()\n\n                      bb.append(arr.buffer)\n                      NewBlob = bb.getBlob(`image/${_this.fileType}`)\n                    }\n                    if (e.name == 'InvalidStateError')\n                      NewBlob = new Blob([arr.buffer], { type: `image/${_this.fileType}` })\n                  }\n                  // TypeError old chrome and FF\n                  callback(NewBlob)\n                }, 200)\n              }\n              else {\n                callback(false, {\n                  type: `image/${_this.fileType}`,\n                })\n              }\n            },\n          })\n        }\n        canvas.toBlob((blob) => {\n          if (blob) {\n            const reader = new FileReader()\n\n            reader.readAsDataURL(blob)\n            reader.onload = () => {\n              const timmer = setInterval(() => {\n                if (reader.readyState == 2) {\n                  clearInterval(timmer)\n                  const newCanv = document.createElement('canvas')\n\n                  const ctx = newCanv.getContext('2d')\n\n                  // 原图裁剪 originalGraph\n                  if (_this.originalGraph == true) {\n                    const scale = _this.drawImg.width / _this.drawImg.swidth\n\n                    // 计算实际图像大小\n                    const transWidth = _this.toolBox.width / scale\n\n                    const transHeight = _this.toolBox.height / scale\n\n                    newCanv.width = transWidth\n                    newCanv.height = transHeight\n                    // 重新计算裁剪坐标\n                    const sx = (_this.toolBox.x - _this.drawImg.x) / scale\n\n                    const sy = (_this.toolBox.y - _this.drawImg.y) / scale\n\n                    const swidth = _this.drawImg.swidth\n\n                    const sheight = _this.drawImg.sheight\n\n                    // TODO 使原图裁剪支持旋转后的图像\n                    // ctx.translate(sx + transWidth/2, sy + transHeight/2);\n                    // ctx.rotate((_this.rotateImg.angle) * Math.PI / 180);\n                    // ctx.translate(-(sx + transWidth/2), -(sy + transHeight/2));\n                    ctx.translate(-sx, -sy)\n                    ctx.drawImage(_this.drawImg.img, 0, 0, swidth, sheight)\n                  }\n                  else {\n                    newCanv.width = _this.toolBox.width\n                    newCanv.height = _this.toolBox.height\n                    const params = _this.toolBox\n\n                    if (_this.rate) {\n                      const p = _this.rate.split(':')[0] / _this.rate.split(':')[1]\n\n                      const m = _this.rate.split(':')[0]\n\n                      const n = _this.rate.split(':')[1]\n\n                      if (m >= n) {\n                        ctx.drawImage(\n                          tempImg,\n                          params.x,\n                          params.y,\n                          params.width,\n                          params.width * p,\n                          0,\n                          0,\n                          params.width,\n                          params.width * p,\n                        )\n                      }\n                      else {\n                        ctx.drawImage(\n                          tempImg,\n                          params.x,\n                          params.y,\n                          params.width,\n                          params.width / p,\n                          0,\n                          0,\n                          params.width,\n                          params.width / p,\n                        )\n                      }\n                    }\n                    else {\n                      ctx.drawImage(\n                        tempImg,\n                        params.x,\n                        params.y,\n                        params.width,\n                        params.height,\n                        0,\n                        0,\n                        params.width,\n                        params.height,\n                      )\n                    }\n                  }\n                  newCanv.toBlob(\n                    (newBlob) => {\n                      const fileName = _this.changeFileName(_this.fileName, _this.fileType)\n\n                      if (!doNotReset) {\n                        _this.handleClose()\n                        _this.$emit('cutDown', {\n                          index: _this.index,\n                          fileName,\n                          blob: newBlob,\n                          file: _this.dataURLtoFile(\n                            newCanv.toDataURL(`image/${_this.fileType}`),\n                            fileName,\n                          ),\n                          dataURL: newCanv.toDataURL(`image/${_this.fileType}`),\n                        })\n                      }\n                      else {\n                        if (_this.previewMode) {\n                          _this.$emit('onPrintImg', {\n                            index: _this.index,\n                            fileName,\n                            blob: newBlob,\n                            file: _this.dataURLtoFile(\n                              newCanv.toDataURL(`image/${_this.fileType}`),\n                              fileName,\n                            ),\n                            dataURL: newCanv.toDataURL(`image/${_this.fileType}`),\n                          })\n                        }\n                      }\n                    },\n                    `image/${_this.fileType}`,\n                    0.95,\n                  )\n                }\n              }, 200)\n            }\n          }\n          else {\n            // IE9及以下\n            const newCanv = document.createElement('canvas')\n\n            newCanv.width = _this.toolBox.width\n            newCanv.height = _this.toolBox.height\n            const ctx = newCanv.getContext('2d')\n\n            const params = _this.toolBox\n\n            if (_this.rate) {\n              const p = _this.rate.split(':')[0] / _this.rate.split(':')[1]\n\n              ctx.drawImage(\n                tempImg,\n                params.x,\n                params.y,\n                params.width,\n                params.width * p,\n                0,\n                0,\n                params.width,\n                params.width * p,\n              )\n            }\n            else {\n              ctx.drawImage(\n                tempImg,\n                params.x,\n                params.y,\n                params.width,\n                params.height,\n                0,\n                0,\n                params.width,\n                params.height,\n              )\n            }\n            const fileName = _this.changeFileName(_this.fileName, _this.fileType)\n\n            if (!doNotReset) {\n              _this.handleClose()\n              _this.$emit('cutDown', {\n                fileName,\n                dataURL: newCanv.toDataURL(`image/${_this.fileType}`),\n              })\n            }\n            else {\n              _this.$emit('onPrintImg', {\n                fileName,\n                dataURL: newCanv.toDataURL(`image/${_this.fileType}`),\n              })\n            }\n          }\n        }),\n        `image/${_this.fileType}`\n      }\n      else {\n        if (!doNotReset) {\n          console.warn('No picture selected')\n          _this.$emit('error', {\n            err: 1,\n            msg: 'No picture selected',\n          })\n        }\n      }\n    },\n    scrollBarControlMove(e) {\n      if (this.rotateControl.active) {\n        const offsetX = e.pageX - this.rotateControl.start.x\n\n        //                let rotate = this.rotateImg.angle/360*100 + offsetX/100*100;\n        let position = this.rotateControl.start.position + offsetX\n\n        if (position <= 0)\n          position = 0\n\n        if (position >= 200)\n          position = 200\n\n        this.rotateControl.position = position\n        this.rotateImg.angle = ((position - 100) / 100) * 180\n        this.printImg()\n      }\n    },\n    scrollBarControlOn(e) {\n      this.rotateControl.active = true\n      this.rotateControl.start.x = e.pageX\n      this.rotateControl.start.y = e.pageY\n      this.rotateControl.start.position = this.rotateControl.position\n    },\n    scrollBarControlOff() {\n      this.rotateControl.active = false\n    },\n  },\n}\n</script>\n<style scoped>\n    .vue-img-cutter {\n        font-size: 12px;\n        line-height: 130%;\n    }\n\n    .fl {\n        float: left;\n    }\n\n    .fr {\n        float: right;\n    }\n\n    .i-dialog-footer {\n        display: block;\n        width: 100%;\n        margin-top: 15px;\n        margin-bottom: 15px;\n        text-align: left;\n    }\n\n    .mask {\n        background: rgba(0, 0, 0, 0.6);\n        position: fixed;\n        overflow-y: scroll;\n        overflow-x: hidden;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        z-index: 999;\n    }\n\n    .dialogBox {\n        clear: both;\n    }\n\n    .dialogBoxModal {\n        position: relative;\n        padding-top: 100px;\n        padding-bottom: 100px;\n        clear: both;\n    }\n\n    .dialogMainModal {\n        line-height: 125%;\n        font-size: 16px;\n        position: absolute;\n        top: 100px;\n        left: 50%;\n        margin-bottom: 100px;\n        transform: translateX(-50%);\n        border: 1px solid rgba(0, 0, 0, 0.8);\n        border-radius: 3px;\n        box-sizing: border-box;\n        padding: 15px 15px 0 15px;\n        background: #fff;\n        z-index: 1000;\n        -webkit-touch-callout: none; /* iOS Safari */\n        -webkit-user-select: none; /* Chrome/Safari/Opera */\n        -khtml-user-select: none; /* Konqueror */\n        -moz-user-select: none; /* Firefox */\n        -ms-user-select: none; /* Internet Explorer/Edge */\n        user-select: none; /* Non-prefixed version, currently*/\n        animation: dialogShow 0.3s;\n    }\n\n    .dialogMain {\n        line-height: 125%;\n        font-size: 16px;\n        box-sizing: border-box;\n        background: #fff;\n        z-index: 1000;\n        -webkit-touch-callout: none; /* iOS Safari */\n        -webkit-user-select: none; /* Chrome/Safari/Opera */\n        -khtml-user-select: none; /* Konqueror */\n        -moz-user-select: none; /* Firefox */\n        -ms-user-select: none; /* Internet Explorer/Edge */\n        user-select: none; /* Non-prefixed version, currently*/\n    }\n\n    @keyframes dialogShow {\n        from {\n            margin-top: -50px;\n            opacity: 0;\n        }\n        to {\n            margin-top: 0;\n            opacity: 1;\n        }\n    }\n\n    .toolMain {\n        box-sizing: border-box;\n    }\n\n    .toolBox {\n        border: 1px solid #dedede;\n        background-image: linear-gradient(\n                45deg,\n                rgba(0, 0, 0, 0.25) 25%,\n                transparent 0,\n                transparent 75%,\n                rgba(0, 0, 0, 0.25) 0\n            ),\n            linear-gradient(45deg, rgba(0, 0, 0, 0.25) 25%, transparent 0, transparent 75%, rgba(0, 0, 0, 0.25) 0);\n        background-color: #eee;\n        background-size: 30px 30px;\n        background-position: 0 0, 15px 15px;\n        position: relative;\n    }\n\n    .tool-title {\n        margin-bottom: 10px;\n    }\n\n    .canvas {\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 98;\n    }\n\n    .canvasSelectBox {\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 99;\n    }\n\n    @keyframes zi-antBorder {\n        0% {\n            background-position: 0px 0px;\n        }\n        50% {\n            background-position: 0px 5px;\n        }\n        100% {\n            background-position: 0px 10px;\n        }\n    }\n\n    .toolBoxControl {\n        background: rgba(255, 255, 255, 0);\n        /*background:#fff;*/\n        position: absolute;\n        z-index: 101;\n        box-sizing: border-box;\n        /*border: 1px dotted #409EFF;*/\n    }\n\n    .toolBoxControlBox {\n        width: 100%;\n        height: 100%;\n        position: relative;\n        background: transparent;\n        z-index: 103;\n        pointer-events: none;\n    }\n\n    .controlBoxInnerLine {\n        position: absolute;\n        z-index: 1;\n        background-size: 10px 10px;\n        background-image: linear-gradient(\n            -45deg,\n            rgba(64, 158, 255, 1) 25%,\n            rgba(64, 158, 255, 0) 25%,\n            rgba(64, 158, 255, 0) 50%,\n            rgba(64, 158, 255, 1) 50%,\n            rgba(64, 158, 255, 1) 75%,\n            rgba(64, 158, 255, 0) 75%,\n            rgba(64, 158, 255, 0)\n        );\n        -ms-animation: zi-antBorder 0.8s linear 0s infinite normal;\n        -moz-animation: zi-antBorder 0.8s linear 0s infinite normal;\n        -webkit-animation: zi-antBorder 0.8s linear 0s infinite normal;\n        animation: zi-antBorder 0.8s linear 0s infinite normal;\n        pointer-events: none;\n    }\n\n    .controlBoxInnerLineTop {\n        height: 1px;\n        width: 100%;\n        top: -1px;\n    }\n\n    .controlBoxInnerLineBottom {\n        height: 1px;\n        width: 100%;\n        bottom: -1px;\n    }\n\n    .controlBoxInnerLineLeft {\n        height: 100%;\n        width: 1px;\n        left: -1px;\n        top: 0;\n    }\n\n    .controlBoxInnerLineRight {\n        height: 100%;\n        width: 1px;\n        right: -1px;\n        top: 0;\n    }\n\n    .toolBoxControlLine {\n        position: absolute;\n        z-index: 1;\n        background: transparent;\n    }\n\n    .toolBoxControlLineItem-1 {\n        top: 33%;\n        width: 100%;\n        height: 1px;\n        box-sizing: border-box;\n        border-bottom: 1px dashed #409eff;\n    }\n\n    .toolBoxControlLineItem-2 {\n        top: 66%;\n        width: 100%;\n        height: 1px;\n        box-sizing: border-box;\n        border-bottom: 1px dashed #409eff;\n    }\n\n    .toolBoxControlLineItem-3 {\n        left: 33%;\n        border-right: 1px dashed #409eff;\n        height: 100%;\n        width: 1px;\n        box-sizing: border-box;\n    }\n\n    .toolBoxControlLineItem-4 {\n        left: 66%;\n        border-right: 1px dashed #409eff;\n        height: 100%;\n        width: 1px;\n        box-sizing: border-box;\n    }\n\n    .controlBox {\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        cursor: move;\n        z-index: 1;\n        pointer-events: none;\n    }\n\n    .controlBtn {\n        border: 1px solid rgba(255, 255, 255, 0.5);\n        box-sizing: border-box;\n        width: 6px;\n        height: 6px;\n        background: #409eff;\n        position: absolute;\n        border-radius: 50%;\n        z-index: 999;\n        pointer-events: auto !important;\n    }\n\n    .leftUp {\n        top: 0;\n        left: 0;\n        margin-left: -3px;\n        margin-top: -3px;\n        cursor: se-resize;\n    }\n\n    .leftDown {\n        bottom: 0;\n        left: 0;\n        margin-left: -3px;\n        margin-bottom: -3px;\n        cursor: sw-resize;\n    }\n\n    .rightUp {\n        top: 0;\n        right: 0;\n        margin-right: -3px;\n        margin-top: -3px;\n        cursor: sw-resize;\n    }\n\n    .rightDown {\n        bottom: 0;\n        right: 0;\n        margin-right: -3px;\n        margin-bottom: -3px;\n        cursor: se-resize;\n    }\n\n    .topCenter {\n        top: 0;\n        right: 50%;\n        margin-right: -3px;\n        margin-top: -3px;\n        cursor: s-resize;\n    }\n\n    .downCenter {\n        bottom: 0;\n        right: 50%;\n        margin-right: -3px;\n        margin-bottom: -3px;\n        cursor: s-resize;\n    }\n\n    .leftCenter {\n        top: 50%;\n        left: 0;\n        margin-left: -3px;\n        margin-top: -3px;\n        cursor: e-resize;\n    }\n\n    .rightCenter {\n        top: 50%;\n        right: 0;\n        margin-right: -3px;\n        margin-top: -3px;\n        cursor: e-resize;\n    }\n\n    .toolBar {\n        margin-top: 10px;\n    }\n\n    .selectArea {\n        display: block;\n        width: 260px;\n        text-align: right;\n        color: #fff;\n        position: absolute;\n        top: -20px;\n        right: 0;\n        font-size: 10px;\n        user-select: none;\n    }\n\n    .tips {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        color: red;\n        z-index: 101;\n        transform: translate(-50%, -50%);\n    }\n\n    .btn {\n        display: inline-block;\n        text-align: center;\n        background: #dedede;\n        height: 40px;\n        line-height: 40px;\n        padding: 0 20px;\n        box-sizing: border-box;\n        border-radius: 4px;\n        cursor: pointer;\n        border: 1px solid;\n        font-size: 14px;\n        transition: background 0.3s, color 0.3s;\n        -webkit-touch-callout: none; /* iOS Safari */\n        -webkit-user-select: none; /* Chrome/Safari/Opera */\n        -khtml-user-select: none; /* Konqueror */\n        -moz-user-select: none; /* Firefox */\n        -ms-user-select: none; /* Internet Explorer/Edge */\n        user-select: none; /* Non-prefixed version, currently*/\n    }\n\n    .btn[disabled] {\n        opacity: 0.6;\n        color: #333;\n        border-color: #dedede !important;\n        background-color: #fff !important;\n        cursor: default;\n    }\n\n    .btn[disabled]:hover {\n        opacity: 0.6;\n        color: #333 !important;\n        border-color: #dedede !important;\n        background-color: #fff !important;\n    }\n\n    .btn-default {\n        color: #333;\n        border-color: #dcdfe6;\n        background-color: #fff;\n        transition: background 0.3s, color 0.3s;\n    }\n\n    .btn-default:hover {\n        color: #409eff;\n        border-color: #c6e2ff;\n        background-color: #ecf5ff;\n    }\n\n    .btn-primary {\n        color: #fff;\n        background-color: #409eff;\n        border-color: #409eff;\n        transition: background 0.3s, color 0.3s;\n    }\n\n    .btn-primary:hover {\n        background: #66b1ff;\n        border-color: #66b1ff;\n        color: #fff;\n    }\n\n    .btn-warning {\n        color: #fff;\n        background-color: #e6a23c;\n        border-color: #e6a23c;\n    }\n\n    .btn-warning:hover {\n        color: #fff;\n        background-color: #eeba6c;\n        border-color: #e6a23c;\n        transition: background 0.3s, color 0.3s;\n    }\n\n    .btn-primary-plain {\n        color: #409eff;\n        border-color: #c6e2ff;\n        background-color: #ecf5ff;\n        transition: background 0.3s, color 0.3s;\n    }\n\n    .btn-primary-plain:hover {\n        background: #66b1ff;\n        border-color: #66b1ff;\n        color: #fff;\n    }\n\n    .btn-xs {\n        height: 26px;\n        line-height: 26px;\n        padding: 0 10px;\n        font-size: 12px;\n    }\n\n    .dialog-footer {\n        float: right;\n    }\n\n    .fade-enter-active,\n    .fade-leave-active {\n        transition: opacity 0.3s;\n    }\n\n    .fade-enter,\n    .fade-leave-to {\n        opacity: 0;\n    }\n\n    .fade-in-enter {\n        margin-top: -50px;\n        opacity: 0;\n        transition: margin-top 0.2s, opacity 0.2s;\n    }\n\n    .fade-out-enter {\n        transition: margin-top 0.2s, opacity 0.2s;\n    }\n\n    .fade-in-active {\n        transition: margin-top 0.2s, opacity 0.2s;\n    }\n\n    .fade-out-active {\n        margin-top: -50px;\n        opacity: 0;\n        transition: margin-top 0.2s, opacity 0.2s;\n    }\n\n    .file-input {\n        height: 40px;\n        line-height: 40px;\n        padding: 0 10px;\n        box-sizing: border-box;\n        border-radius: 4px;\n        border: 1px solid #dedede;\n    }\n\n    .file-input::placeholder {\n        color: #c0c4cc;\n    }\n\n    .toolbar-item {\n        display: inline-block;\n    }\n\n    .closeIcon {\n        float: right;\n        cursor: pointer;\n        display: block;\n        background: #c6e2ff;\n        color: #fff;\n        width: 18px;\n        height: 18px;\n        line-height: 18px;\n        text-align: center;\n        border-radius: 50%;\n        margin: 0;\n        padding: 0;\n        transition: transform 0.3s, background 0.3s;\n        /*transform: rotate(90deg);*/\n    }\n\n    .closeIcon:hover {\n        background: #409eff;\n        transform: rotate(180deg);\n    }\n\n    .copyright {\n        font-size: 10px !important;\n        clear: both !important;\n        width: 100% !important;\n        text-align: right !important;\n        display: block !important;\n        opacity: 0.5 !important;\n        position: absolute !important;\n        bottom: 0 !important;\n        right: 0 !important;\n        line-height: 100% !important;\n        z-index: 100 !important;\n    }\n\n    .copyright a {\n        color: #fff !important;\n        text-decoration: none !important;\n        position: relative !important;\n        opacity: 1 !important;\n        display: inline-block !important;\n        padding: 2px !important;\n        background: rgba(0, 0, 0, 0.4);\n    }\n\n    /*工具栏*/\n    .dockMain {\n        position: absolute;\n        z-index: 1002;\n        bottom: 5px;\n        left: 5px;\n        /*transform: translateX(-50%);*/\n        opacity: 0.5;\n        transition: opacity 0.5s;\n        /*width: 98%;*/\n        box-sizing: border-box;\n        padding: 5px 5px;\n        border-radius: 5px;\n    }\n\n    .dockMain:hover {\n        opacity: 1;\n    }\n\n    .dockBtn {\n        font-size: 10px;\n        cursor: pointer;\n        display: inline-block;\n        margin-right: 4px;\n        color: #409eff;\n        border: 1px solid #c6e2ff;\n        background-color: #ecf5ff;\n        padding: 1px 4px;\n        border-radius: 3px;\n        height: 20px;\n        line-height: 16px;\n        transition: background 0.2s, color 0.2s;\n        -webkit-touch-callout: none; /* iOS Safari */\n        -webkit-user-select: none; /* Chrome/Safari/Opera */\n        -khtml-user-select: none; /* Konqueror */\n        -moz-user-select: none; /* Firefox */\n        -ms-user-select: none; /* Internet Explorer/Edge */\n        user-select: none; /* Non-prefixed version, currently*/\n    }\n\n    .dockBtn:hover {\n        color: #fff;\n        background-color: #409eff;\n        border-color: #409eff;\n    }\n\n    /* 旋转进度条 */\n    .dockBtnScrollBar {\n        display: inline-block;\n        margin-right: 4px;\n        margin-left: 10px;\n        background: #409eff;\n        width: 200px;\n        height: 10px;\n        border-radius: 5px;\n        position: relative;\n        -webkit-touch-callout: none; /* iOS Safari */\n        -webkit-user-select: none; /* Chrome/Safari/Opera */\n        -khtml-user-select: none; /* Konqueror */\n        -moz-user-select: none; /* Firefox */\n        -ms-user-select: none; /* Internet Explorer/Edge */\n        user-select: none; /* Non-prefixed version, currently*/\n    }\n\n    .scrollBarControl {\n        position: absolute;\n        cursor: pointer;\n        background: #fff;\n        border: 2px solid #409eff;\n        box-sizing: border-box;\n        border-radius: 50%;\n        width: 20px;\n        height: 20px;\n        top: 50%;\n        transform: translate(-50%, -50%);\n        box-shadow: 0 0 3px #1f5184;\n    }\n\n    .scrollBarText {\n        position: absolute;\n        cursor: pointer;\n        background: rgba(0, 0, 0, 0.7);\n        padding: 2px;\n        color: #fff;\n        top: -16px;\n        height: 14px;\n        line-height: 14px;\n        text-align: center;\n        font-size: 10px;\n        border-radius: 3px;\n        transform: translate(-50%, -50%);\n    }\n</style>\n","import mod from \"-!../../../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./ImgCutter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./ImgCutter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImgCutter.vue?vue&type=template&id=35891e32&scoped=true&\"\nimport script from \"./ImgCutter.vue?vue&type=script&lang=js&\"\nexport * from \"./ImgCutter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ImgCutter.vue?vue&type=style&index=0&id=35891e32&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"35891e32\",\n  null\n  \n)\n\nexport default component.exports","import ImgCutter from '../src/components/ImgCutter.vue'\nexport default ImgCutter\n","<template>\r\n  <Modal\r\n    v-model=\"showModal\"\r\n    draggable\r\n    sticky\r\n    :reset-drag-position=\"true\"\r\n    :mask=\"false\"\r\n    :width=\"800\"\r\n    title=\"智能裁剪\"\r\n    ok-text=\"保存修改\"\r\n    cancel-text=\"取消修改\"\r\n    @on-visible-change=\"handleVisibleChange\"\r\n    @on-ok=\"saveCropedImg\"\r\n    @on-cancel=\"closeModal\"\r\n  >\r\n    <div class=\"img-cutter\">\r\n      <div class=\"modal-left\">\r\n        <ImgCutter\r\n          ref=\"imgCutterModal\"\r\n          :is-modal=\"false\"\r\n          :box-width=\"570\"\r\n          :box-height=\"400\"\r\n          :show-choose-btn=\"false\"\r\n          :preview-mode=\"true\"\r\n          :size-change=\"true\"\r\n          :cut-width=\"200\"\r\n          :cut-height=\"280\"\r\n          rate=\"10:14\"\r\n          :auto-rotate=\"autoRotate\"\r\n          @cutDown=\"cutDown\"\r\n          @onPrintImg=\"printImg\"\r\n          @onClearAll=\"clearImg\"\r\n          @error=\"error\"\r\n        >\r\n          <!-- <template #choose> </template> -->\r\n          <template #cancel>\r\n            <Button ref=\"cancelButton\" type=\"text\" disabled>\r\n              取消\r\n            </Button>\r\n          </template>\r\n          <template #confirm>\r\n            <Button ref=\"cropButton\" type=\"primary\" disabled>\r\n              裁剪\r\n            </Button>\r\n          </template>\r\n        </ImgCutter>\r\n      </div>\r\n      <div class=\"modal-right\">\r\n        <div ref=\"previewimg\" class=\"preview-img\">\r\n          <!-- <img ref=\"previewimg\" src=\"\" alt=\"\" /> -->\r\n        </div>\r\n        <div class=\"right-button\">\r\n          <Button\r\n            ref=\"autoRotateButton\"\r\n            class=\"right-button\"\r\n            type=\"primary\"\r\n            disabled\r\n            :loading=\"loading\"\r\n            @click=\"smartRotate\"\r\n          >\r\n            <span v-if=\"!loading\">自动矫正</span>\r\n            <span v-else>处理中...</span>\r\n          </Button>\r\n          <!-- <Button\r\n            ref=\"autoRotateButton\"\r\n            class=\"right-button\"\r\n            type=\"primary\"\r\n            disabled\r\n            @click=\"smartRotate\"\r\n          >\r\n            自动矫正\r\n          </Button> -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </Modal>\r\n</template>\r\n\r\n<script>\r\nimport * as faceapi from 'face-api.js'\r\nimport { mapGetters, mapState } from 'vuex'\r\nimport ImgCutter from '../ImgCutter/src/'\r\nexport default {\r\n  name: 'SmartCrop',\r\n  components: {\r\n    ImgCutter,\r\n  },\r\n  model: {\r\n    prop: 'smartCropModalVal',\r\n    event: 'input',\r\n  },\r\n  props: ['smartCropModalVal'],\r\n  data() {\r\n    return {\r\n      showModal: false,\r\n      autoRotate: 0,\r\n      cutdownImgPreviewSrc: '',\r\n      loading: false,\r\n    }\r\n  },\r\n  watch: {\r\n    smartCropModalVal(nv) {\r\n      this.showModal = nv\r\n    },\r\n    showModal(nv) {\r\n      if (nv && this.$store.state.currentMainPreviewImgName) {\r\n        this.$refs.imgCutterModal.handleOpen({\r\n          name: this.$store.state.currentMainPreviewImgName,\r\n          src: this.getCurrentImgSrc,\r\n        })\r\n        this.$refs.cancelButton.$el.removeAttribute('disabled')\r\n        this.$refs.cropButton.$el.removeAttribute('disabled')\r\n        this.$refs.autoRotateButton.$el.removeAttribute('disabled')\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState(['currentMainPreviewImgName']),\r\n    ...mapGetters(['getCurrentImgSrc']),\r\n  },\r\n  mounted() {\r\n    this.showModal = this.smartCropModalVal\r\n  },\r\n  methods: {\r\n    handleVisibleChange(val) {\r\n      // val || this.$emit(\"input\", val);\r\n      if (val === false) {\r\n        this.$emit('input', val)\r\n        this.autoRotate = 0\r\n        this.$refs.cancelButton.$el.click()\r\n        this.cutdownImgPreviewSrc = ''\r\n      }\r\n      if (val === true) {\r\n        try {\r\n          this.cutdownImgPreviewSrc = this.getCurrentImgSrc\r\n        }\r\n        catch (err) {\r\n          console.log()\r\n        }\r\n      }\r\n      // this.autoRotate = -this.autoRotate;\r\n      // this.$refs.cancelButton.$el.click();\r\n      // this.autoRotate = -this.autoRotate;\r\n    },\r\n    calcAng(leftEye, rightEye) {\r\n      // 右眼在左眼上右上方\r\n      if (rightEye.y <= leftEye.y && rightEye.x >= leftEye.x) {\r\n        const radian = Math.atan(\r\n          (leftEye.y - rightEye.y) / (rightEye.x - leftEye.x),\r\n        )\r\n        const angle = (radian * 180) / Math.PI\r\n        return angle\r\n      }\r\n      // 右眼在左眼右下方\r\n      if (rightEye.y >= leftEye.y && leftEye.x < rightEye.x) {\r\n        const radian = Math.atan(\r\n          (rightEye.y - leftEye.y) / (rightEye.x - leftEye.x),\r\n        )\r\n        const angle = (radian * 180) / Math.PI\r\n        return -angle\r\n      }\r\n    },\r\n    async loadModel() {\r\n      await faceapi.nets.ssdMobilenetv1.loadFromUri('/models/')\r\n      await faceapi.nets.faceLandmark68Net.loadFromUri('/models/')\r\n    },\r\n    async smartRotate() {\r\n      try {\r\n        if (this.cutdownImgPreviewSrc === '') throw new Error('没有选择图片')\r\n        const input = new Image()\r\n        input.src = this.cutdownImgPreviewSrc\r\n        this.loading = true\r\n        await this.loadModel()\r\n        const detectionWithLandmarks = await faceapi\r\n          .detectSingleFace(input)\r\n          .withFaceLandmarks()\r\n        const landmarks = detectionWithLandmarks.landmarks\r\n        const leftEye = landmarks.positions[36]\r\n        const rightEye = landmarks.positions[45]\r\n        this.autoRotate = this.calcAng(leftEye, rightEye)\r\n        this.loading = false\r\n        this.$Message.success('自动矫正处理成功')\r\n        this.$refs.autoRotateButton.$el.setAttribute('disabled', 'false')\r\n      }\r\n      catch (error) {\r\n        this.$Message.error('处理失败')\r\n      }\r\n    },\r\n    cutDown(file) {\r\n      const img = document.createElement('img')\r\n      img.setAttribute('width', '160px')\r\n      img.setAttribute('height', '225px')\r\n      img.src = file.dataURL\r\n      this.$refs.previewimg.appendChild(img)\r\n      this.$refs.cancelButton.$el.setAttribute('disabled', 'true')\r\n      this.$refs.cropButton.$el.setAttribute('disabled', 'true')\r\n      this.$refs.autoRotateButton.$el.setAttribute('disabled', 'true')\r\n    },\r\n    printImg(file) {\r\n      let img = this.$refs.previewimg.firstChild\r\n      if (!img) {\r\n        img = document.createElement('img')\r\n        img.setAttribute('width', '160px')\r\n        img.setAttribute('height', '225px')\r\n        img.src = file.dataURL\r\n        this.$refs.previewimg.appendChild(img)\r\n      }\r\n      img.src = file.dataURL\r\n    },\r\n    clearImg() {\r\n      const img = this.$refs.previewimg.firstChild\r\n      if (img) img.remove()\r\n\r\n      this.cutdownImgPreviewSrc = ''\r\n      this.$refs.cancelButton.$el.setAttribute('disabled', 'true')\r\n      this.$refs.cropButton.$el.setAttribute('disabled', 'true')\r\n      this.$refs.autoRotateButton.$el.setAttribute('disabled', 'true')\r\n    },\r\n    error(err) {\r\n      if (err.msg === 'No picture selected') this.$Message.error('未选择图片')\r\n    },\r\n    saveCropedImg() {\r\n      const img = this.$refs.previewimg.firstChild\r\n      if (img) {\r\n        this.$store.dispatch('updateImgData', {\r\n          imgName: this.currentMainPreviewImgName,\r\n          imgSrc: img.src,\r\n        })\r\n        this.$Message.success('保存修改成功')\r\n      }\r\n      else {\r\n        this.$Message.error('未进行任何修改')\r\n      }\r\n    },\r\n    closeModal() {\r\n      if (this.currentMainPreviewImgName !== '')\r\n        this.$Message.warning('未进行任何修改！')\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.img-cutter {\r\n  display: flex;\r\n  .modal-right {\r\n    width: 198px;\r\n    text-align: center;\r\n    .preview-img {\r\n      margin: auto;\r\n      width: 175px;\r\n      height: 245px;\r\n    }\r\n    .right-button {\r\n      margin-top: 10px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./SmartCrop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./SmartCrop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SmartCrop.vue?vue&type=template&id=64bc6e89&scoped=true&\"\nimport script from \"./SmartCrop.vue?vue&type=script&lang=js&\"\nexport * from \"./SmartCrop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SmartCrop.vue?vue&type=style&index=0&id=64bc6e89&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"64bc6e89\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"draggable\":\"\",\"sticky\":\"\",\"reset-drag-position\":true,\"mask\":false,\"width\":600,\"title\":\"智能替换背景\",\"ok-text\":\"保存修改\",\"cancel-text\":\"取消修改\"},on:{\"on-visible-change\":_vm.handleVisibleChange,\"on-ok\":_vm.saveReplacedImg,\"on-cancel\":_vm.closeModal},model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[(_vm.getCurrentImgSrc)?_c('div',{staticClass:\"background-replace\"},[_c('div',{staticClass:\"left\"},[_c('img',{attrs:{\"src\":_vm.getCurrentImgSrc,\"alt\":\"\",\"width\":\"200\",\"height\":\"280\"}})]),_c('div',{staticClass:\"middle\"},[_c('canvas',{ref:\"canvas\",attrs:{\"id\":\"canvas\",\"width\":\"200\",\"height\":\"280\"}})]),(_vm.getCurrentImgSrc)?_c('div',{staticClass:\"right\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.replaceBgColor('blue')}}},[_vm._v(\" 换蓝色背景 \")]),_c('Button',{attrs:{\"type\":\"error\"},on:{\"click\":function($event){return _vm.replaceBgColor('red')}}},[_vm._v(\" 换红色背景 \")]),_c('Button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.replaceBgColor('white')}}},[_vm._v(\" 换白色背景 \")])],1):_vm._e()]):_c('h3',[_vm._v(\" 请先选择图片 \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\n  api_key: '5Tv5VWWBYtPNtkB2c4l3MPbePwtg1qtx',\n  api_secret: '_NlDutPsgZ6HmG_y_bO4It6_Bj8IXlTA',\n  image_base64: '',\n  return_grayscale: 0,\n}\n","<template>\n  <Modal\n    v-model=\"showModal\"\n    draggable\n    sticky\n    :reset-drag-position=\"true\"\n    :mask=\"false\"\n    :width=\"600\"\n    title=\"智能替换背景\"\n    ok-text=\"保存修改\"\n    cancel-text=\"取消修改\"\n    @on-visible-change=\"handleVisibleChange\"\n    @on-ok=\"saveReplacedImg\"\n    @on-cancel=\"closeModal\"\n  >\n    <div v-if=\"getCurrentImgSrc\" class=\"background-replace\">\n      <div class=\"left\">\n        <img :src=\"getCurrentImgSrc\" alt=\"\" width=\"200\" height=\"280\">\n      </div>\n      <div class=\"middle\">\n        <canvas id=\"canvas\" ref=\"canvas\" width=\"200\" height=\"280\" />\n      </div>\n      <div v-if=\"getCurrentImgSrc\" class=\"right\">\n        <Button type=\"primary\" @click=\"replaceBgColor('blue')\">\n          换蓝色背景\n        </Button>\n        <Button type=\"error\" @click=\"replaceBgColor('red')\">\n          换红色背景\n        </Button>\n        <Button type=\"text\" @click=\"replaceBgColor('white')\">\n          换白色背景\n        </Button>\n      </div>\n    </div>\n    <h3 v-else>\n      请先选择图片\n    </h3>\n  </Modal>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex'\nimport axios from 'axios'\nimport qs from 'qs'\nimport formData from '@/config/faceppapi'\nexport default {\n  name: 'BackgroundReplace',\n  model: {\n    prop: 'backgroundReplaceModalVal',\n    event: 'input',\n  },\n  props: ['backgroundReplaceModalVal'],\n  data() {\n    return {\n      showModal: false,\n    }\n  },\n  watch: {\n    backgroundReplaceModalVal(nv) {\n      this.showModal = nv\n    },\n    currentMainPreviewImgName() {\n      if (this.$refs.canvas)\n        this.$refs.canvas.getContext('2d').clearRect(0, 0, 200, 280)\n    },\n  },\n  mounted() {\n    this.showModal = this.backgroundReplaceModalVal\n  },\n  computed: {\n    ...mapState(['currentMainPreviewImgName']),\n    ...mapGetters(['getCurrentImgSrc']),\n  },\n  methods: {\n    handleVisibleChange(val) {\n      val || this.$emit('input', val)\n    },\n    closeModal() {\n      if (this.currentMainPreviewImgName !== '')\n        this.$Message.warning('未进行任何修改！')\n    },\n    saveReplacedImg() {\n      if (this.$refs.canvas && !this.isCanvasBlank(this.$refs.canvas)) {\n        const canvas = this.$refs.canvas\n        const dataUrl = canvas.toDataURL()\n        this.$store.dispatch('updateImgData', {\n          imgName: this.currentMainPreviewImgName,\n          imgSrc: dataUrl,\n        })\n        this.$Message.success('背景替换成功')\n        if (this.$refs.canvas)\n          this.$refs.canvas.getContext('2d').clearRect(0, 0, 200, 280)\n      }\n      else {\n        this.$Message.error('未进行任何修改！')\n      }\n    },\n    // 验证canvas画布是否为空\n    isCanvasBlank(canvas) {\n      const blank = document.createElement('canvas')// 系统获取一个空canvas对象\n      blank.width = canvas.width\n      blank.height = canvas.height\n      return canvas.toDataURL() === blank.toDataURL()// 比较值相等则为空\n    },\n    async requestFacePP() {\n      try {\n        formData.image_base64 = this.getCurrentImgSrc\n        const res = await axios({\n          url: 'https://api-cn.faceplusplus.com/humanbodypp/v2/segment',\n          method: 'post',\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n          },\n          data: qs.stringify(formData),\n        })\n        if (res.status === 200)\n          return res.data.body_image\n        else\n          throw new Error('背景替换失败')\n      }\n      catch (err) {\n        this.$Message.error('背景替换失败')\n      }\n      finally {\n        formData.image_base64 = ''\n      }\n    },\n    async replaceBgColor(color) {\n      let bgColor = ''\n      switch (color) {\n        case 'blue':\n          bgColor = '#00BFF3'\n          break\n        case 'red':\n          bgColor = '#FF0000'\n          break\n        case 'white':\n          bgColor = '#FFFFFF'\n          break\n      }\n      const frontImgBase64 = await this.requestFacePP()\n      const frontImgSrc = `data:image/png;base64,${frontImgBase64}`\n      const frontImg = new Image()\n      frontImg.src = frontImgSrc\n      frontImg.width = 200\n      frontImg.height = 280\n      frontImg.onload = () => {\n        const canvas = this.$refs.canvas\n        const ctx = canvas.getContext('2d')\n        ctx.fillStyle = bgColor\n        ctx.fillRect(0, 0, 200, 280)\n        ctx.drawImage(frontImg, 0, 0, 200, 280)\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.background-replace {\n  display: flex;\n  .left {\n    width: 200px;\n    height: 280px;\n  }\n  .middle {\n    width: 200px;\n    height: 280px;\n  }\n  .right {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 200px;\n    height: 280px;\n    Button {\n      margin: 15px 0;\n    }\n  }\n}\n\n</style>\n","import mod from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./BackgroundReplace.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./BackgroundReplace.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BackgroundReplace.vue?vue&type=template&id=df7af7ac&scoped=true&\"\nimport script from \"./BackgroundReplace.vue?vue&type=script&lang=js&\"\nexport * from \"./BackgroundReplace.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BackgroundReplace.vue?vue&type=style&index=0&id=df7af7ac&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"df7af7ac\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"header-view\">\r\n    <Header class=\"header\">\r\n      <Menu class=\"menu\" mode=\"horizontal\" theme=\"light\">\r\n        <div class=\"layout-nav\">\r\n          <Dropdown class=\"upload-img\">\r\n            <Upload\r\n              ref=\"upload\"\r\n              action=\"#\"\r\n              :multiple=\"false\"\r\n              :show-upload-list=\"false\"\r\n              :before-upload=\"loadImg\"\r\n              :format=\"['jpg', 'jpeg', 'png']\"\r\n              :accept=\"accept\"\r\n              :on-format-error=\"handleFormatError\"\r\n            >\r\n              <div class=\"upload\">\r\n                <Icon type=\"ios-add-circle-outline\" />\r\n                打开图片\r\n              </div>\r\n            </Upload>\r\n          </Dropdown>\r\n          <Dropdown class=\"reset-img\">\r\n            <Button type=\"text\" @click=\"resetCurrentImg\">\r\n              <Icon type=\"ios-crop\" />\r\n              重置修改\r\n            </Button>\r\n          </Dropdown>\r\n          <Dropdown class=\"crop-img\">\r\n            <Button type=\"text\" @click=\"smartCropModalVal = true\">\r\n              <Icon type=\"ios-crop\" />\r\n              裁剪图片\r\n            </Button>\r\n          </Dropdown>\r\n          <Dropdown class=\"replace-bg\">\r\n            <Button type=\"text\" @click=\"backgroundReplaceModalVal = true\">\r\n              <Icon type=\"ios-aperture-outline\" />\r\n              背景替换\r\n            </Button>\r\n          </Dropdown>\r\n          <Dropdown class=\"replace-bg\">\r\n            <Button type=\"text\" @click=\"exportImg\">\r\n              <Icon type=\"ios-cloud-download-outline\" />\r\n              导出下载\r\n            </Button>\r\n          </Dropdown>\r\n        </div>\r\n      </Menu>\r\n    </Header>\r\n    <SmartCrop v-model=\"smartCropModalVal\" />\r\n    <BackgroundReplace v-model=\"backgroundReplaceModalVal\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SmartCrop from '@/components/header/SmartCrop'\r\nimport BackgroundReplace from '@/components/header/BackgroundReplace'\r\nexport default {\r\n  components: { SmartCrop, BackgroundReplace },\r\n  data() {\r\n    return {\r\n      accept: 'image/jpeg,image/jpg,image/png',\r\n      smartCropModalVal: false,\r\n      backgroundReplaceModalVal: false,\r\n    }\r\n  },\r\n  methods: {\r\n    loadImg(file) {\r\n      const reader = new FileReader()\r\n      reader.readAsDataURL(file)\r\n      reader.onload = (img) => {\r\n        // 将上传的图片名字和base64Url分发\r\n        this.$store.dispatch('addImgData', {\r\n          imgName: file.name,\r\n          imgSrc: img.target.result,\r\n        })\r\n        this.$store.dispatch('changeCurrentImg', file.name)\r\n        // 清空上传列表\r\n        this.$refs.upload.clearFiles()\r\n      }\r\n      // 禁止默认自动上传\r\n      return false\r\n    },\r\n    handleFormatError() {\r\n      console.log('文件不是图片')\r\n    },\r\n    resetCurrentImg() {\r\n      if (this.$store.state.currentMainPreviewImgName === '') {\r\n        this.$Message.error('没有要重置的图片')\r\n      }\r\n      else {\r\n        this.$store.dispatch('resetCurrentImg')\r\n        this.$Message.success('重置成功！')\r\n      }\r\n    },\r\n    exportImg() {\r\n      const currentImgSrc = this.$store.getters.getCurrentImgSrc\r\n      if (currentImgSrc) {\r\n        const a = document.createElement('a')\r\n        const event = new MouseEvent('click')\r\n        a.download = '导出.png'\r\n        a.href = currentImgSrc\r\n        a.dispatchEvent(event)\r\n      }\r\n      else {\r\n        this.$Message.error('未选择图片')\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.header {\r\n  background-color: #f6f6f6 !important;\r\n  padding: 0 !important;\r\n  .menu {\r\n    width: 1024px;\r\n    .upload {\r\n      width: 225px;\r\n      text-align: center !important;\r\n      background-color: #2e3033;\r\n      color: #fff !important;\r\n    }\r\n    .upload:hover {\r\n      cursor: pointer;\r\n      color: #42b683 !important;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HeaderView.vue?vue&type=template&id=476914cb&scoped=true&\"\nimport script from \"./HeaderView.vue?vue&type=script&lang=js&\"\nexport * from \"./HeaderView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HeaderView.vue?vue&type=style&index=0&id=476914cb&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"476914cb\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',{staticClass:\"main\"},[_c('Sider',{staticClass:\"sider\",attrs:{\"hide-trigger\":\"\"}},[_c('SiderPreviewCard')],1),_c('Content',{staticClass:\"content\"},[_c('MainPreviewCard')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((_vm.OriginImgData),function(img){return _c('Card',{key:img.imgName,staticClass:\"card\",attrs:{\"padding\":5}},[_c('div',{staticClass:\"preview-img\",staticStyle:{\"text-align\":\"center\"},on:{\"click\":function($event){return _vm.changeMainPreview(img.imgName)}}},[_c('img',{attrs:{\"src\":img.imgSrc}})]),_c('Tooltip',{staticClass:\"remove-img\",attrs:{\"content\":\"点击删除此照片\",\"placement\":\"right\",\"theme\":\"light\"}},[_c('Button',{attrs:{\"type\":\"text\",\"size\":\"large\",\"icon\":\"ios-trash\"},on:{\"click\":function($event){return _vm.removeImg(img.imgName)}}})],1)],1)}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <Card\r\n      v-for=\"img in OriginImgData\"\r\n      :key=\"img.imgName\"\r\n      class=\"card\"\r\n      :padding=\"5\"\r\n    >\r\n      <div\r\n        class=\"preview-img\"\r\n        style=\"text-align: center\"\r\n        @click=\"changeMainPreview(img.imgName)\"\r\n      >\r\n        <img :src=\"img.imgSrc\">\r\n      </div>\r\n      <Tooltip\r\n        class=\"remove-img\"\r\n        content=\"点击删除此照片\"\r\n        placement=\"right\"\r\n        theme=\"light\"\r\n      >\r\n        <Button\r\n          type=\"text\"\r\n          size=\"large\"\r\n          icon=\"ios-trash\"\r\n          @click=\"removeImg(img.imgName)\"\r\n        />\r\n      </Tooltip>\r\n      <!-- <div class=\"remove-img\">\r\n        <Button type=\"dashed\" size=\"small\"><Icon type=\"ios-trash\" /></Button>\r\n      </div> -->\r\n    </Card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  name: 'PreviewCard',\r\n  computed: {\r\n    ...mapState(['OriginImgData']),\r\n    OriginImgDataList() {\r\n      if (this.OriginImgData)\r\n        return this.OriginImgData\r\n\r\n      return []\r\n    },\r\n  },\r\n  methods: {\r\n    removeImg(imgName) {\r\n      this.$store.dispatch('removeImg', imgName)\r\n    },\r\n    changeMainPreview(imgName) {\r\n      this.$store.dispatch('changeCurrentImg', imgName)\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.card {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 190px !important;\r\n  height: 140px !important;\r\n  margin: 10px auto;\r\n  // padding: 10px !important;\r\n  .preview-img {\r\n    width: 170px;\r\n    height: 120px;\r\n    cursor: pointer;\r\n  }\r\n  img {\r\n    object-fit: contain;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .remove-img {\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 0;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./SiderPreviewCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./SiderPreviewCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SiderPreviewCard.vue?vue&type=template&id=d843d828&scoped=true&\"\nimport script from \"./SiderPreviewCard.vue?vue&type=script&lang=js&\"\nexport * from \"./SiderPreviewCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SiderPreviewCard.vue?vue&type=style&index=0&id=d843d828&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d843d828\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"show-img\"}},[(_vm.ModifiedImgData.length != 0)?_c('img',{attrs:{\"src\":_vm.getCurrentImgSrc,\"alt\":\"\"}}):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"show-img\">\r\n    <img v-if=\"ModifiedImgData.length != 0\" :src=\"getCurrentImgSrc\" alt=\"\">\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState } from 'vuex'\r\nexport default {\r\n  name: 'MainPreviewCard',\r\n  computed: {\r\n    ...mapState(['ModifiedImgData']),\r\n    ...mapGetters(['getCurrentImgSrc']),\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#show-img {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 650px;\r\n  height: 450px;\r\n  // background-color: aqua;\r\n}\r\nimg {\r\n  object-fit: contain;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./MainPreviewCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./MainPreviewCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainPreviewCard.vue?vue&type=template&id=49758519&scoped=true&\"\nimport script from \"./MainPreviewCard.vue?vue&type=script&lang=js&\"\nexport * from \"./MainPreviewCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MainPreviewCard.vue?vue&type=style&index=0&id=49758519&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"49758519\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <Layout class=\"main\">\r\n    <Sider class=\"sider\" hide-trigger>\r\n      <SiderPreviewCard />\r\n    </Sider>\r\n    <Content class=\"content\">\r\n      <MainPreviewCard />\r\n    </Content>\r\n  </Layout>\r\n</template>\r\n\r\n<script>\r\nimport SiderPreviewCard from '@/components/main/SiderPreviewCard.vue'\r\nimport MainPreviewCard from '@/components/main/MainPreviewCard.vue'\r\nexport default {\r\n  components: { SiderPreviewCard, MainPreviewCard },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.main {\r\n  background-color: #f6f6f6 !important;\r\n}\r\n.sider {\r\n  background-color: #2e3033 !important;\r\n  max-width: 225px !important;\r\n  min-width: 225px !important;\r\n  width: 225px !important;\r\n}\r\n.content {\r\n  display: flex;\r\n  height: 500px;\r\n  background-color: #fff;\r\n  margin: 50px;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./MainView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./MainView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainView.vue?vue&type=template&id=4ba4d24c&scoped=true&\"\nimport script from \"./MainView.vue?vue&type=script&lang=js&\"\nexport * from \"./MainView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MainView.vue?vue&type=style&index=0&id=4ba4d24c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ba4d24c\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"app\">\r\n    <div class=\"layout\">\r\n      <Layout>\r\n        <HeaderView />\r\n        <MainView />\r\n      </Layout>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HeaderView from '@/views/header/HeaderView.vue'\r\nimport MainView from '@/views/main/MainView.vue'\r\nexport default {\r\n  components: {\r\n    HeaderView,\r\n    MainView,\r\n  },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n#app {\r\n  width: 100%;\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.layout {\r\n  width: 1024px;\r\n  // margin: auto auto;\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.70.0/node_modules/thread-loader/dist/cjs.js!../node_modules/.pnpm/babel-loader@8.2.4_fa907c5a4f16ccc493e21649ccc59574/node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=f8b444ba&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=f8b444ba&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/.pnpm/vue-loader@15.9.8_1f9b6d6a8c5e3033a639476f0cf6d876/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f8b444ba\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    // 左侧原始图片数据，原始图片不修改\r\n    OriginImgData: JSON.parse(localStorage.getItem('OriginImgData')) || [],\r\n    // 中间显示图片数据，中间图片会进行修改操作\r\n    ModifiedImgData: JSON.parse(localStorage.getItem('ModifiedImgData')) || [],\r\n    // 当前中间显示图片的名字\r\n    currentMainPreviewImgName: localStorage.getItem('currentMainPreviewImgName') || '',\r\n  },\r\n  getters: {\r\n    // 获取中间显示图片的图片base64\r\n    getCurrentImgSrc(state) {\r\n      // 中间图片是要显示被修改的图片，而不是原始图片\r\n      if (state.ModifiedImgData.length > 0) {\r\n        return state.ModifiedImgData.find(\r\n          // 根据currentMainPreviewImgName来获取当前应该显示的图片\r\n          item => item.imgName === state.currentMainPreviewImgName,\r\n        ).imgSrc\r\n      }\r\n      return ''\r\n    },\r\n  },\r\n  mutations: {\r\n    // 打开图片，往ModifiedImgData也添加一份\r\n    ADD_IMG_DATA(state, img) {\r\n      state.OriginImgData.push(img)\r\n      state.ModifiedImgData.push(img)\r\n      localStorage.setItem('OriginImgData', JSON.stringify(state.OriginImgData))\r\n      localStorage.setItem('ModifiedImgData', JSON.stringify(state.ModifiedImgData))\r\n    },\r\n    // 根据图片名字从OriginImgData和ModifiedImgData中删除对应图片\r\n    RM_IMG_DATA(state, imgName) {\r\n      // 加载的图片不止一张\r\n      if (state.OriginImgData.length > 1) {\r\n        // 删除名字为imgName的图片\r\n        state.OriginImgData = state.OriginImgData.filter(\r\n          item => item.imgName !== imgName,\r\n        )\r\n        state.ModifiedImgData = state.ModifiedImgData.filter(\r\n          item => item.imgName !== imgName,\r\n        )\r\n        // 如果删除的不是当前显示的图片，则让当前图片指向最后一张图片\r\n        if (state.currentMainPreviewImgName === imgName) {\r\n          state.currentMainPreviewImgName\r\n            = state.OriginImgData[state.OriginImgData.length - 1].imgName\r\n        }\r\n        localStorage.setItem('OriginImgData', JSON.stringify(state.OriginImgData))\r\n        localStorage.setItem('ModifiedImgData', JSON.stringify(state.ModifiedImgData))\r\n        localStorage.setItem('currentMainPreviewImgName', state.currentMainPreviewImgName)\r\n      }\r\n      else {\r\n        // 只剩下一张图片，则直接全部清空完成删除\r\n        state.OriginImgData = []\r\n        state.ModifiedImgData = []\r\n        state.currentMainPreviewImgName = ''\r\n        localStorage.removeItem('OriginImgData')\r\n        localStorage.removeItem('ModifiedImgData')\r\n        localStorage.removeItem('currentMainPreviewImgName')\r\n      }\r\n    },\r\n    UPDATE_IMG_DATA(state, img) {\r\n      const index = state.ModifiedImgData.findIndex(\r\n        item => item.imgName === img.imgName,\r\n      )\r\n      state.ModifiedImgData.splice(index, 1, img)\r\n      localStorage.setItem('ModifiedImgData', JSON.stringify(state.ModifiedImgData))\r\n    },\r\n    CHANGE_CURRENT_IMG(state, imgName) {\r\n      state.currentMainPreviewImgName = imgName\r\n      localStorage.setItem('currentMainPreviewImgName', state.currentMainPreviewImgName)\r\n    },\r\n    RESET_CURRENT_IMG(state) {\r\n      if (state.ModifiedImgData.length > 0) {\r\n        const currentOriginImgData = state.OriginImgData.find(\r\n          item => item.imgName === state.currentMainPreviewImgName,\r\n        )\r\n        const ModifiedImgIndex = state.ModifiedImgData.findIndex(\r\n          item => item.imgName === state.currentMainPreviewImgName,\r\n        )\r\n        state.ModifiedImgData.splice(ModifiedImgIndex, 1, currentOriginImgData)\r\n      }\r\n      localStorage.setItem('ModifiedImgData', JSON.stringify(state.ModifiedImgData))\r\n    },\r\n  },\r\n  actions: {\r\n    addImgData({ commit }, img) {\r\n      commit('ADD_IMG_DATA', img)\r\n    },\r\n    updateImgData({ commit }, img) {\r\n      commit('UPDATE_IMG_DATA', img)\r\n    },\r\n    changeCurrentImg({ commit }, imgName) {\r\n      commit('CHANGE_CURRENT_IMG', imgName)\r\n    },\r\n    removeImg({ commit }, imgName) {\r\n      commit('RM_IMG_DATA', imgName)\r\n    },\r\n    resetCurrentImg({ commit }) {\r\n      commit('RESET_CURRENT_IMG')\r\n    },\r\n  },\r\n  modules: {},\r\n})\r\n","import Vue from 'vue'\r\nimport ViewUI from 'view-design'\r\nimport App from './App.vue'\r\nimport store from './store'\r\nimport 'view-design/dist/styles/iview.css'\r\nVue.use(ViewUI)\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  store,\r\n  render: h => h(App),\r\n}).$mount('#app')\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkidphotomaker\"] = self[\"webpackChunkidphotomaker\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(625); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","staticRenderFns","ref","loadImg","accept","handleFormatError","_v","on","resetCurrentImg","$event","smartCropModalVal","backgroundReplaceModalVal","exportImg","model","value","callback","$$v","expression","handleVisibleChange","saveCropedImg","closeModal","showModal","autoRotate","cutDown","printImg","clearImg","error","scopedSlots","_u","key","fn","proxy","loading","smartRotate","showChooseBtn","isModal","handleOpen","_t","_e","$slots","openImgCutter","open","_s","label","class","style","boxWidth","handleClose","boxHeight","controlBtnMouseMove","controlBtnMouseUp","directives","name","rawName","drawImg","img","chooseImg","tool","dropImg","active","controlBox","disable","toolBox","toolBgc","dropImgOff","rate","scaleReset","swidth","width","toFixed","originalGraph","turnImg","turnReset","rotateControl","position","scrollBarControlMove","scrollBarControlOn","scrollBarControlOff","rotateImg","angle","flipHorizontal","flipVertically","toolBoxMouseDown","toolBoxMouseUp","toolBoxMouseMove","toolBoxMouseLeave","showToolBoxWidth","showToolBoxHeight","showToolBoxX","showToolBoxY","sizeChange","controlBtnMouseDown","height","DoNotDisplayCopyright","version","dropImgOn","dropImgMove","staticStyle","putImgToCanv","cropPicture","config","description","author","private","scripts","serve","build","lint","dependencies","devDependencies","main","repository","type","url","keywords","license","bugs","homepage","eslintConfig","root","env","node","extends","parserOptions","parser","rules","browserslist","props","crossOrigin","Boolean","default","required","crossOriginHeader","String","lockScroll","Number","cutWidth","cutHeight","imgMove","moveAble","previewMode","CuttingOriginal","WatermarkText","WatermarkTextFont","WatermarkTextColor","WatermarkTextX","WatermarkTextY","smallToUpload","saveCutPosition","scaleAble","index","fileType","toolBoxOverflow","require","data","toolBoxWidth","toolBoxHeight","visible","fileName","cutImageObj","onPrintImgTimmer","toolBoxPosition","x","y","sx","sy","sheight","boxMove","start","moveTo","pageX","pageY","params","scaleImg","btnName","selectBox","selectBoxColor","isFlipHorizontal","isFlipVertically","computed","result","watch","nv","autoTurnImg","mounted","$nextTick","$refs","onmousewheel","scaleImgWheel","addEventListener","methods","init","document","dialogBoxHeight","dialogMainModalRef","offsetHeight","windowHeight","window","innerHeight","mask","src","Error","$image","Image","top","opacity","onerror","console","$emit","event","e","msg","clearCutImageObj","onload","complete","importImgToCanv","body","appendChild","clearAll","inputFile","click","imgHeight","imgWidth","putToolBox","file","target","files","reader","FileReader","readAsDataURL","newUrl","createElement","timmer","setInterval","readyState","clearInterval","changeFileName","filename","checkToolBoxOverflow","then","drawControlBox","Promise","p","log","resolve","isSupportFileApi","dataURLtoFile","dataurl","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","File","_this","c","canvas","ctx","getContext","clearRect","c1","canvasSelectBox","ctx1","undefined","remove","$toolBoxControl","toolBoxControl","toolBoxControlWidth","toolBoxControlHeight","fillStyle","fillRect","Math","abs","left","clearTimeout","setTimeout","resetToolBox","$toolBox","parseInt","offsetX","offsetY","canv","font","textAlign","textBaseline","save","translate","rotate","scale","drawImage","restore","stopPropagation","ee","wheelDelta","detail","widthLimit","preventDefault","returnValue","startAngle","turnAngle","clientX","clientY","lastIndexOf","substr","doNotReset","ctx2","fillText","tempImg","toDataURL","HTMLCanvasElement","prototype","toBlob","Object","defineProperty","quality","binStr","len","NewBlob","i","Blob","BlobBuilder","bb","append","buffer","getBlob","blob","newCanv","transWidth","transHeight","m","newBlob","dataURL","warn","err","component","components","ImgCutter","prop","cutdownImgPreviewSrc","$store","state","currentMainPreviewImgName","imgCutterModal","getCurrentImgSrc","cancelButton","$el","removeAttribute","cropButton","autoRotateButton","val","calcAng","leftEye","rightEye","radian","atan","async","input","loadModel","detectionWithLandmarks","withFaceLandmarks","landmarks","positions","$Message","success","setAttribute","previewimg","firstChild","dispatch","imgName","imgSrc","saveReplacedImg","replaceBgColor","api_key","api_secret","image_base64","return_grayscale","isCanvasBlank","dataUrl","blank","formData","res","method","headers","status","color","bgColor","frontImgBase64","requestFacePP","frontImgSrc","frontImg","SmartCrop","BackgroundReplace","upload","clearFiles","currentImgSrc","getters","a","MouseEvent","download","href","dispatchEvent","_l","changeMainPreview","removeImg","OriginImgDataList","OriginImgData","ModifiedImgData","SiderPreviewCard","MainPreviewCard","HeaderView","MainView","Vue","Vuex","JSON","parse","localStorage","getItem","find","item","mutations","ADD_IMG_DATA","push","setItem","stringify","RM_IMG_DATA","filter","removeItem","UPDATE_IMG_DATA","findIndex","splice","CHANGE_CURRENT_IMG","RESET_CURRENT_IMG","currentOriginImgData","ModifiedImgIndex","actions","addImgData","commit","updateImgData","changeCurrentImg","modules","ViewUI","store","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","keys","every","r","getter","__esModule","d","definition","o","enumerable","get","g","globalThis","Function","obj","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}